{"ast":null,"code":"var _jsxFileName = \"/Users/lujiayi/intern/hailingge/frontend/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { DndProvider, useDrag, useDrop } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport axios from 'axios'; // 假设您仍然需要axios来模拟后端分析\n\n// MEMBER_SIZE 代表成员元素的完整宽度/高度，用于计算重叠和边界\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MEMBER_SIZE = 90;\nconst MIN_DISTANCE = 0; // 成员之间允许的最小距离，0 表示可以接触\n\n// FamilyMember 组件 (从 Canvas.js 复制而来，确保一致性)\nconst FamilyMember = ({\n  member\n}) => {\n  _s();\n  // useDrag 钩子用于使组件可拖动\n  const [{\n    isDragging\n  }, drag] = useDrag(() => ({\n    type: 'MEMBER',\n    // 拖动项的类型\n    item: {\n      id: member.id\n    },\n    // 拖动时传递的数据\n    collect: monitor => ({\n      isDragging: monitor.isDragging() // 检查是否正在拖动\n    })\n  }));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: drag // 将拖动源连接到 DOM 节点\n    ,\n    className: \"absolute bg-blue-200 text-blue-800 p-4 rounded-full shadow-lg cursor-grab active:cursor-grabbing transform -translate-x-1/2 -translate-y-1/2 flex flex-col items-center justify-center transition-all duration-100 ease-out\",\n    style: {\n      left: member.x,\n      top: member.y,\n      width: `${MEMBER_SIZE}px`,\n      height: `${MEMBER_SIZE}px`,\n      fontSize: '1.5rem',\n      minWidth: '80px',\n      minHeight: '80px',\n      opacity: isDragging ? 0.5 : 1,\n      // 拖动时降低不透明度\n      zIndex: isDragging ? 100 : 1 // 拖动时提升层级\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"text-5xl mb-1\",\n      children: member.icon\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"font-bold text-xl\",\n      children: member.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"text-lg text-blue-700\",\n      children: member.role\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 5\n  }, this);\n};\n\n/**\n * 获取一个不与其他成员重叠的位置，并确保在画布边界内。\n * 这里的 x, y 和 m.x, m.y 都被视为成员的中心坐标。\n * @param {number} x - 目标X坐标 (中心)\n * @param {number} y - 目标Y坐标 (中心)\n * @param {Array} members - 所有家庭成员数组\n * @param {number} currentId - 当前正在拖动的成员ID\n * @param {number} canvasWidth - 画布宽度\n * @param {number} canvasHeight - 画布高度\n * @returns {{x: number, y: number}} 安全的X, Y坐标\n */\n_s(FamilyMember, \"wuumsFp4qAni9XRJfRhQAZjuD/k=\", false, function () {\n  return [useDrag];\n});\n_c = FamilyMember;\nfunction getNonOverlappingPosition(x, y, members, currentId, canvasWidth, canvasHeight) {\n  let safeX = x;\n  let safeY = y;\n  let tries = 0;\n  const halfMember = MEMBER_SIZE / 2;\n  while (tries < 30) {\n    // 尝试30次以寻找不重叠的位置\n    const isOverlapping = members.some(m => m.id !== currentId &&\n    // 检查两个成员的中心点距离是否小于一个成员的完整尺寸，即它们重叠\n    Math.abs(m.x - safeX) < MEMBER_SIZE - MIN_DISTANCE && Math.abs(m.y - safeY) < MEMBER_SIZE - MIN_DISTANCE);\n    if (!isOverlapping) break; // 如果不重叠，则找到安全位置\n\n    // 如果重叠，微调位置并确保仍在画布内\n    // 每次尝试向右下角移动一点，避免死循环\n    safeX = Math.max(halfMember, Math.min(safeX + 15, canvasWidth - halfMember));\n    safeY = Math.max(halfMember, Math.min(safeY + 15, canvasHeight - halfMember));\n    tries++;\n  }\n\n  // 最终确保位置在画布边界内\n  safeX = Math.max(halfMember, Math.min(safeX, canvasWidth - halfMember));\n  safeY = Math.max(halfMember, Math.min(safeY, canvasHeight - halfMember));\n  return {\n    x: safeX,\n    y: safeY\n  };\n}\n\n// Canvas 组件 (从您提供的 Canvas.js 复制而来，确保一致性)\nconst Canvas = ({\n  members,\n  updateMemberPosition\n}) => {\n  _s2();\n  const [, drop] = useDrop({\n    accept: 'MEMBER',\n    drop: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset(); // 鼠标在视口中的坐标\n      const canvas = document.getElementById('canvas-area');\n      if (!clientOffset || !canvas) return;\n\n      // 获取画布相对于视口的位置和尺寸\n      const canvasRect = canvas.getBoundingClientRect();\n      const canvasWidth = canvasRect.width;\n      const canvasHeight = canvasRect.height;\n      const halfMember = MEMBER_SIZE / 2;\n\n      // 计算鼠标在画布内的相对位置\n      // 这将是成员的中心点坐标\n      let x = clientOffset.x - canvasRect.left;\n      let y = clientOffset.y - canvasRect.top;\n\n      // 确保成员的中心点完全在画布内\n      x = Math.max(halfMember, Math.min(x, canvasWidth - halfMember));\n      y = Math.max(halfMember, Math.min(y, canvasHeight - halfMember));\n\n      // 防止重叠，并再次确保在画布内\n      const {\n        x: safeX,\n        y: safeY\n      } = getNonOverlappingPosition(x, y, members, item.id, canvasWidth, canvasHeight);\n      updateMemberPosition(item.id, safeX, safeY);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"canvas-area\",\n    ref: drop,\n    className: \"mx-auto relative bg-white border-4 border-blue-300 rounded-xl overflow-hidden shadow-inner select-none w-full h-[500px] md:h-[600px] lg:h-[700px]\" // 响应式高度\n    ,\n    style: {\n      backgroundImage: `\n          radial-gradient(circle,rgb(188, 175, 200) 1px, transparent 1px),\n          linear-gradient(#f3f4f6,rgb(255, 255, 255))\n        `,\n      backgroundSize: '20px 20px, 100% 100%',\n      backgroundPosition: '0 0, 0 0',\n      boxSizing: 'border-box' // 确保边框包含在宽高中\n    },\n    children: members.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-blue-400 text-3xl font-semibold select-none\",\n      children: \"\\u8BF7\\u6DFB\\u52A0\\u5BB6\\u5EAD\\u6210\\u5458\\u5E76\\u62D6\\u52A8\\u5230\\u753B\\u5E03\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }, this) : members.map(member => /*#__PURE__*/_jsxDEV(FamilyMember, {\n      member: member\n    }, member.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n};\n_s2(Canvas, \"hdmCamxlwL9WeSdzgzIVyaE48AI=\", false, function () {\n  return [useDrop];\n});\n_c2 = Canvas;\nconst PRESET_ROLES = [{\n  role: '自己',\n  icon: '🧑'\n}, {\n  role: '父亲',\n  icon: '👨'\n}, {\n  role: '母亲',\n  icon: '👩'\n}, {\n  role: '孩子',\n  icon: '🧒'\n}, {\n  role: '祖父',\n  icon: '👴'\n}, {\n  role: '祖母',\n  icon: '👵'\n}, {\n  role: '配偶',\n  icon: '💑'\n}, {\n  role: '哥哥',\n  icon: '🧑‍🦱'\n}, {\n  role: '姐姐',\n  icon: '👩‍🦰'\n}, {\n  role: '弟弟',\n  icon: '🧑‍🎓'\n}, {\n  role: '妹妹',\n  icon: '👧'\n}, {\n  role: '儿子',\n  icon: '👦'\n}, {\n  role: '女儿',\n  icon: '👧'\n}, {\n  role: '继父',\n  icon: '🧔'\n}, {\n  role: '继母',\n  icon: '👩‍🦳'\n}, {\n  role: '养父',\n  icon: '🧓'\n}, {\n  role: '养母',\n  icon: '👵'\n}, {\n  role: '朋友',\n  icon: '🤝'\n}, {\n  role: '宠物',\n  icon: '🐶'\n}];\nexport default function App() {\n  _s3();\n  const [members, setMembers] = useState(() => {\n    const saved = localStorage.getItem('members');\n    return saved ? JSON.parse(saved) : [];\n  });\n  const [name, setName] = useState('');\n  const [role, setRole] = useState('');\n  const [icon, setIcon] = useState('🧑');\n  const [analysis, setAnalysis] = useState('');\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    localStorage.setItem('members', JSON.stringify(members));\n  }, [members]);\n  const addMember = () => {\n    var _document$getElementB, _document$getElementB2;\n    if (!name || !role) return;\n    // Set initial position for new members within the canvas boundaries\n    // These values should ideally be dynamic based on actual canvas size\n    const canvasWidth = ((_document$getElementB = document.getElementById('canvas-area')) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.offsetWidth) || 800;\n    const canvasHeight = ((_document$getElementB2 = document.getElementById('canvas-area')) === null || _document$getElementB2 === void 0 ? void 0 : _document$getElementB2.offsetHeight) || 400;\n    const halfMember = MEMBER_SIZE / 2;\n    const initialX = Math.random() * (canvasWidth - MEMBER_SIZE) + halfMember;\n    const initialY = Math.random() * (canvasHeight - MEMBER_SIZE) + halfMember;\n    setMembers([...members, {\n      id: Date.now(),\n      name,\n      role,\n      icon,\n      x: initialX,\n      y: initialY\n    }]);\n    setName('');\n    setRole('');\n    setIcon('🧑');\n  };\n  const quickAdd = preset => {\n    setRole(preset.role);\n    setIcon(preset.icon);\n    setName(''); // Clear name when quick adding a role\n  };\n  const updateMemberPosition = (id, x, y) => {\n    setMembers(members.map(m => m.id === id ? {\n      ...m,\n      x,\n      y\n    } : m));\n  };\n  const generateDescription = () => {\n    return members.map(m => `${m.name}（${m.role}）位于(${Math.round(m.x)}, ${Math.round(m.y)})`).join('，');\n  };\n  const analyze = async () => {\n    setLoading(true);\n    setAnalysis('');\n    try {\n      const description = generateDescription();\n      // Placeholder for actual API call. Replace with your backend endpoint.\n      // For demonstration, we'll simulate an API call.\n      // const res = await axios.post('http://127.0.0.1:5000/analyze', { description });\n      // setAnalysis(res.data.analysis);\n\n      // Simulated API call for demonstration\n      await new Promise(resolve => setTimeout(resolve, 1500)); // Simulate network delay\n      setAnalysis(`根据您的排列，家庭成员：${description}。这可能暗示了成员间的亲密程度、影响力或关注焦点。例如，靠近中心的成员可能感觉更被关注，而边缘的成员可能更独立。`);\n    } catch (error) {\n      console.error(\"Analysis failed:\", error);\n      setAnalysis('⚠️ 分析失败，请稍后重试。');\n    }\n    setLoading(false);\n  };\n  const clearMembers = () => {\n    setMembers([]);\n    setAnalysis('');\n  };\n  return /*#__PURE__*/_jsxDEV(DndProvider, {\n    backend: HTML5Backend,\n    children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4 sm:px-6 font-inter\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-6xl mx-auto bg-white rounded-3xl shadow-3xl p-8 sm:p-12 border border-blue-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-5xl font-extrabold text-blue-800 text-center mb-8 drop-shadow-lg tracking-tight\",\n          children: \"\\u5BB6\\u5EAD\\u6210\\u5458\\u6392\\u5217\\u5206\\u6790\\u5668\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 border border-blue-200 rounded-3xl shadow-xl p-8 mb-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-3xl font-bold text-blue-700 mb-6 text-center\",\n            children: \"\\u5FEB\\u901F\\u6DFB\\u52A0\\u6216\\u81EA\\u5B9A\\u4E49\\u6210\\u5458\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap justify-center gap-4 mb-8\",\n            children: PRESET_ROLES.map(preset => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => quickAdd(preset),\n              className: \"bg-blue-100 hover:bg-blue-300 text-blue-800 px-5 py-3 rounded-2xl text-xl font-semibold flex items-center gap-2 border border-blue-300 shadow-md transition-all duration-200 ease-in-out transform hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-3xl\",\n                children: preset.icon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 19\n              }, this), preset.role]\n            }, preset.role, true, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col md:flex-row gap-6 items-center justify-center mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"border-2 border-blue-300 p-4 text-2xl rounded-2xl w-full md:w-80 focus:outline-none focus:border-blue-500 transition-all shadow-md bg-white\",\n              placeholder: \"\\u59D3\\u540D\",\n              value: name,\n              onChange: e => setName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"border-2 border-blue-300 p-4 text-2xl rounded-2xl w-full md:w-80 focus:outline-none focus:border-blue-500 transition-all shadow-md bg-white\",\n              placeholder: \"\\u5173\\u7CFB (\\u5982: \\u670B\\u53CB, \\u5BA0\\u7269)\",\n              value: role,\n              onChange: e => setRole(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"border-2 border-blue-300 p-4 text-3xl rounded-2xl bg-white shadow-md focus:outline-none focus:border-blue-500 transition-all cursor-pointer\",\n              value: icon,\n              onChange: e => setIcon(e.target.value),\n              children: PRESET_ROLES.map(preset => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: preset.icon,\n                children: [preset.icon, \" \", preset.role]\n              }, preset.role, true, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: addMember,\n              className: \"bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800 text-white px-10 py-4 rounded-2xl text-2xl font-bold shadow-lg transition-all duration-200 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50\",\n              children: \"\\u2795 \\u6DFB\\u52A0\\u6210\\u5458\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center mb-8\",\n          children: /*#__PURE__*/_jsxDEV(Canvas, {\n            members: members,\n            updateMemberPosition: updateMemberPosition\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col sm:flex-row justify-center gap-6 mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: analyze,\n            disabled: loading || members.length === 0,\n            className: `px-10 py-4 text-2xl font-bold rounded-2xl shadow-lg transition-all duration-300 ease-in-out transform ${loading || members.length === 0 ? 'bg-gray-300 text-gray-600 cursor-not-allowed' : 'bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50'}`,\n            children: loading ? '分析中...' : '🔍 开始分析'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: clearMembers,\n            disabled: members.length === 0,\n            className: \"bg-white border-2 border-gray-300 text-gray-700 px-8 py-3 rounded-2xl text-xl font-semibold shadow-md hover:bg-gray-100 transition-all duration-200 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50\",\n            children: \"\\uD83E\\uDDF9 \\u6E05\\u7A7A\\u6240\\u6709\\u6210\\u5458\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this), analysis && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-12 p-8 bg-blue-50 border border-blue-200 rounded-3xl shadow-inner-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-3xl font-extrabold text-blue-700 mb-5\",\n            children: \"\\uD83E\\uDDE0 \\u5206\\u6790\\u7ED3\\u679C\\uFF1A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-800 text-xl leading-relaxed whitespace-pre-line\",\n            children: analysis\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 245,\n    columnNumber: 5\n  }, this);\n}\n_s3(App, \"fn83Gfiugm2cXIVRxcAkVQzRt7o=\");\n_c3 = App;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"FamilyMember\");\n$RefreshReg$(_c2, \"Canvas\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"names":["React","useState","useEffect","DndProvider","useDrag","useDrop","HTML5Backend","axios","jsxDEV","_jsxDEV","MEMBER_SIZE","MIN_DISTANCE","FamilyMember","member","_s","isDragging","drag","type","item","id","collect","monitor","ref","className","style","left","x","top","y","width","height","fontSize","minWidth","minHeight","opacity","zIndex","children","icon","fileName","_jsxFileName","lineNumber","columnNumber","name","role","_c","getNonOverlappingPosition","members","currentId","canvasWidth","canvasHeight","safeX","safeY","tries","halfMember","isOverlapping","some","m","Math","abs","max","min","Canvas","updateMemberPosition","_s2","drop","accept","clientOffset","getClientOffset","canvas","document","getElementById","canvasRect","getBoundingClientRect","backgroundImage","backgroundSize","backgroundPosition","boxSizing","length","map","_c2","PRESET_ROLES","App","_s3","setMembers","saved","localStorage","getItem","JSON","parse","setName","setRole","setIcon","analysis","setAnalysis","loading","setLoading","setItem","stringify","addMember","_document$getElementB","_document$getElementB2","offsetWidth","offsetHeight","initialX","random","initialY","Date","now","quickAdd","preset","generateDescription","round","join","analyze","description","Promise","resolve","setTimeout","error","console","clearMembers","backend","onClick","placeholder","value","onChange","e","target","disabled","_c3","$RefreshReg$"],"sources":["/Users/lujiayi/intern/hailingge/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { DndProvider, useDrag, useDrop } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport axios from 'axios'; // 假设您仍然需要axios来模拟后端分析\n\n// MEMBER_SIZE 代表成员元素的完整宽度/高度，用于计算重叠和边界\nconst MEMBER_SIZE = 90;\nconst MIN_DISTANCE = 0; // 成员之间允许的最小距离，0 表示可以接触\n\n// FamilyMember 组件 (从 Canvas.js 复制而来，确保一致性)\nconst FamilyMember = ({ member }) => {\n  // useDrag 钩子用于使组件可拖动\n  const [{ isDragging }, drag] = useDrag(() => ({\n    type: 'MEMBER', // 拖动项的类型\n    item: { id: member.id }, // 拖动时传递的数据\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(), // 检查是否正在拖动\n    }),\n  }));\n\n  return (\n    <div\n      ref={drag} // 将拖动源连接到 DOM 节点\n      className=\"absolute bg-blue-200 text-blue-800 p-4 rounded-full shadow-lg cursor-grab active:cursor-grabbing transform -translate-x-1/2 -translate-y-1/2 flex flex-col items-center justify-center transition-all duration-100 ease-out\"\n      style={{\n        left: member.x,\n        top: member.y,\n        width: `${MEMBER_SIZE}px`,\n        height: `${MEMBER_SIZE}px`,\n        fontSize: '1.5rem',\n        minWidth: '80px',\n        minHeight: '80px',\n        opacity: isDragging ? 0.5 : 1, // 拖动时降低不透明度\n        zIndex: isDragging ? 100 : 1, // 拖动时提升层级\n      }}\n    >\n      <span className=\"text-5xl mb-1\">{member.icon}</span>\n      <span className=\"font-bold text-xl\">{member.name}</span>\n      <span className=\"text-lg text-blue-700\">{member.role}</span>\n    </div>\n  );\n};\n\n/**\n * 获取一个不与其他成员重叠的位置，并确保在画布边界内。\n * 这里的 x, y 和 m.x, m.y 都被视为成员的中心坐标。\n * @param {number} x - 目标X坐标 (中心)\n * @param {number} y - 目标Y坐标 (中心)\n * @param {Array} members - 所有家庭成员数组\n * @param {number} currentId - 当前正在拖动的成员ID\n * @param {number} canvasWidth - 画布宽度\n * @param {number} canvasHeight - 画布高度\n * @returns {{x: number, y: number}} 安全的X, Y坐标\n */\nfunction getNonOverlappingPosition(x, y, members, currentId, canvasWidth, canvasHeight) {\n  let safeX = x;\n  let safeY = y;\n  let tries = 0;\n  const halfMember = MEMBER_SIZE / 2;\n\n  while (tries < 30) { // 尝试30次以寻找不重叠的位置\n    const isOverlapping = members.some(\n      m =>\n        m.id !== currentId &&\n        // 检查两个成员的中心点距离是否小于一个成员的完整尺寸，即它们重叠\n        Math.abs(m.x - safeX) < MEMBER_SIZE - MIN_DISTANCE &&\n        Math.abs(m.y - safeY) < MEMBER_SIZE - MIN_DISTANCE\n    );\n\n    if (!isOverlapping) break; // 如果不重叠，则找到安全位置\n\n    // 如果重叠，微调位置并确保仍在画布内\n    // 每次尝试向右下角移动一点，避免死循环\n    safeX = Math.max(halfMember, Math.min(safeX + 15, canvasWidth - halfMember));\n    safeY = Math.max(halfMember, Math.min(safeY + 15, canvasHeight - halfMember));\n    tries++;\n  }\n\n  // 最终确保位置在画布边界内\n  safeX = Math.max(halfMember, Math.min(safeX, canvasWidth - halfMember));\n  safeY = Math.max(halfMember, Math.min(safeY, canvasHeight - halfMember));\n\n  return { x: safeX, y: safeY };\n}\n\n\n// Canvas 组件 (从您提供的 Canvas.js 复制而来，确保一致性)\nconst Canvas = ({ members, updateMemberPosition }) => {\n  const [, drop] = useDrop({\n    accept: 'MEMBER',\n    drop: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset(); // 鼠标在视口中的坐标\n      const canvas = document.getElementById('canvas-area');\n\n      if (!clientOffset || !canvas) return;\n\n      // 获取画布相对于视口的位置和尺寸\n      const canvasRect = canvas.getBoundingClientRect();\n      const canvasWidth = canvasRect.width;\n      const canvasHeight = canvasRect.height;\n      const halfMember = MEMBER_SIZE / 2;\n\n      // 计算鼠标在画布内的相对位置\n      // 这将是成员的中心点坐标\n      let x = clientOffset.x - canvasRect.left;\n      let y = clientOffset.y - canvasRect.top;\n\n      // 确保成员的中心点完全在画布内\n      x = Math.max(halfMember, Math.min(x, canvasWidth - halfMember));\n      y = Math.max(halfMember, Math.min(y, canvasHeight - halfMember));\n\n      // 防止重叠，并再次确保在画布内\n      const { x: safeX, y: safeY } = getNonOverlappingPosition(\n        x, y, members, item.id, canvasWidth, canvasHeight\n      );\n\n      updateMemberPosition(item.id, safeX, safeY);\n    }\n  });\n\n  return (\n    <div\n      id=\"canvas-area\"\n      ref={drop}\n      className=\"mx-auto relative bg-white border-4 border-blue-300 rounded-xl overflow-hidden shadow-inner select-none w-full h-[500px] md:h-[600px] lg:h-[700px]\" // 响应式高度\n      style={{\n        backgroundImage: `\n          radial-gradient(circle,rgb(188, 175, 200) 1px, transparent 1px),\n          linear-gradient(#f3f4f6,rgb(255, 255, 255))\n        `,\n        backgroundSize: '20px 20px, 100% 100%',\n        backgroundPosition: '0 0, 0 0',\n        boxSizing: 'border-box', // 确保边框包含在宽高中\n      }}\n    >\n      {members.length === 0 ? (\n        <div className=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-blue-400 text-3xl font-semibold select-none\">\n          请添加家庭成员并拖动到画布\n        </div>\n      ) : (\n        members.map(member => (\n          <FamilyMember key={member.id} member={member} />\n        ))\n      )}\n    </div>\n  );\n};\n\n\nconst PRESET_ROLES = [\n  { role: '自己', icon: '🧑' },\n  { role: '父亲', icon: '👨' },\n  { role: '母亲', icon: '👩' },\n  { role: '孩子', icon: '🧒' },\n  { role: '祖父', icon: '👴' },\n  { role: '祖母', icon: '👵' },\n  { role: '配偶', icon: '💑' },\n  { role: '哥哥', icon: '🧑‍🦱' },\n  { role: '姐姐', icon: '👩‍🦰' },\n  { role: '弟弟', icon: '🧑‍🎓' },\n  { role: '妹妹', icon: '👧' },\n  { role: '儿子', icon: '👦' },\n  { role: '女儿', icon: '👧' },\n  { role: '继父', icon: '🧔' },\n  { role: '继母', icon: '👩‍🦳' },\n  { role: '养父', icon: '🧓' },\n  { role: '养母', icon: '👵' },\n  { role: '朋友', icon: '🤝' },\n  { role: '宠物', icon: '🐶' },\n];\n\nexport default function App() {\n  const [members, setMembers] = useState(() => {\n    const saved = localStorage.getItem('members');\n    return saved ? JSON.parse(saved) : [];\n  });\n  const [name, setName] = useState('');\n  const [role, setRole] = useState('');\n  const [icon, setIcon] = useState('🧑');\n  const [analysis, setAnalysis] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    localStorage.setItem('members', JSON.stringify(members));\n  }, [members]);\n\n  const addMember = () => {\n    if (!name || !role) return;\n    // Set initial position for new members within the canvas boundaries\n    // These values should ideally be dynamic based on actual canvas size\n    const canvasWidth = document.getElementById('canvas-area')?.offsetWidth || 800;\n    const canvasHeight = document.getElementById('canvas-area')?.offsetHeight || 400;\n    const halfMember = MEMBER_SIZE / 2;\n\n    const initialX = Math.random() * (canvasWidth - MEMBER_SIZE) + halfMember;\n    const initialY = Math.random() * (canvasHeight - MEMBER_SIZE) + halfMember;\n\n    setMembers([...members, { id: Date.now(), name, role, icon, x: initialX, y: initialY }]);\n    setName('');\n    setRole('');\n    setIcon('🧑');\n  };\n\n  const quickAdd = preset => {\n    setRole(preset.role);\n    setIcon(preset.icon);\n    setName(''); // Clear name when quick adding a role\n  };\n\n  const updateMemberPosition = (id, x, y) => {\n    setMembers(members.map(m => (m.id === id ? { ...m, x, y } : m)));\n  };\n\n  const generateDescription = () => {\n    return members.map(m => `${m.name}（${m.role}）位于(${Math.round(m.x)}, ${Math.round(m.y)})`).join('，');\n  };\n\n  const analyze = async () => {\n    setLoading(true);\n    setAnalysis('');\n    try {\n      const description = generateDescription();\n      // Placeholder for actual API call. Replace with your backend endpoint.\n      // For demonstration, we'll simulate an API call.\n      // const res = await axios.post('http://127.0.0.1:5000/analyze', { description });\n      // setAnalysis(res.data.analysis);\n\n      // Simulated API call for demonstration\n      await new Promise(resolve => setTimeout(resolve, 1500)); // Simulate network delay\n      setAnalysis(`根据您的排列，家庭成员：${description}。这可能暗示了成员间的亲密程度、影响力或关注焦点。例如，靠近中心的成员可能感觉更被关注，而边缘的成员可能更独立。`);\n\n    } catch (error) {\n      console.error(\"Analysis failed:\", error);\n      setAnalysis('⚠️ 分析失败，请稍后重试。');\n    }\n    setLoading(false);\n  };\n\n  const clearMembers = () => {\n    setMembers([]);\n    setAnalysis('');\n  };\n\n  return (\n    <DndProvider backend={HTML5Backend}> {/* 使用 DndProvider 包裹整个应用 */}\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4 sm:px-6 font-inter\">\n        <div className=\"max-w-6xl mx-auto bg-white rounded-3xl shadow-3xl p-8 sm:p-12 border border-blue-200\">\n          <h1 className=\"text-5xl font-extrabold text-blue-800 text-center mb-8 drop-shadow-lg tracking-tight\">\n            家庭成员排列分析器\n          </h1>\n\n          {/* 表单区域美化 */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-3xl shadow-xl p-8 mb-10\">\n            <h2 className=\"text-3xl font-bold text-blue-700 mb-6 text-center\">快速添加或自定义成员</h2>\n            <div className=\"flex flex-wrap justify-center gap-4 mb-8\">\n              {PRESET_ROLES.map(preset => (\n                <button\n                  key={preset.role}\n                  onClick={() => quickAdd(preset)}\n                  className=\"bg-blue-100 hover:bg-blue-300 text-blue-800 px-5 py-3 rounded-2xl text-xl font-semibold flex items-center gap-2 border border-blue-300 shadow-md transition-all duration-200 ease-in-out transform hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50\"\n                >\n                  <span className=\"text-3xl\">{preset.icon}</span>{preset.role}\n                </button>\n              ))}\n            </div>\n            <div className=\"flex flex-col md:flex-row gap-6 items-center justify-center mb-4\">\n              <input\n                className=\"border-2 border-blue-300 p-4 text-2xl rounded-2xl w-full md:w-80 focus:outline-none focus:border-blue-500 transition-all shadow-md bg-white\"\n                placeholder=\"姓名\"\n                value={name}\n                onChange={e => setName(e.target.value)}\n              />\n              <input\n                className=\"border-2 border-blue-300 p-4 text-2xl rounded-2xl w-full md:w-80 focus:outline-none focus:border-blue-500 transition-all shadow-md bg-white\"\n                placeholder=\"关系 (如: 朋友, 宠物)\"\n                value={role}\n                onChange={e => setRole(e.target.value)}\n              />\n              <select\n                className=\"border-2 border-blue-300 p-4 text-3xl rounded-2xl bg-white shadow-md focus:outline-none focus:border-blue-500 transition-all cursor-pointer\"\n                value={icon}\n                onChange={e => setIcon(e.target.value)}\n              >\n                {PRESET_ROLES.map(preset => (\n                  <option key={preset.role} value={preset.icon}>\n                    {preset.icon} {preset.role}\n                  </option>\n                ))}\n              </select>\n              <button\n                onClick={addMember}\n                className=\"bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800 text-white px-10 py-4 rounded-2xl text-2xl font-bold shadow-lg transition-all duration-200 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50\"\n              >\n                ➕ 添加成员\n              </button>\n            </div>\n          </div>\n\n          {/* 画布区域 */}\n          <div className=\"flex justify-center mb-8\">\n            <Canvas members={members} updateMemberPosition={updateMemberPosition} />\n          </div>\n\n          {/* 操作按钮 */}\n          <div className=\"flex flex-col sm:flex-row justify-center gap-6 mt-6\">\n            <button\n              onClick={analyze}\n              disabled={loading || members.length === 0}\n              className={`px-10 py-4 text-2xl font-bold rounded-2xl shadow-lg transition-all duration-300 ease-in-out transform ${\n                loading || members.length === 0\n                  ? 'bg-gray-300 text-gray-600 cursor-not-allowed'\n                  : 'bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50'\n              }`}\n            >\n              {loading ? '分析中...' : '🔍 开始分析'}\n            </button>\n            <button\n              onClick={clearMembers}\n              disabled={members.length === 0}\n              className=\"bg-white border-2 border-gray-300 text-gray-700 px-8 py-3 rounded-2xl text-xl font-semibold shadow-md hover:bg-gray-100 transition-all duration-200 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50\"\n            >\n              🧹 清空所有成员\n            </button>\n          </div>\n\n          {/* 分析结果展示 */}\n          {analysis && (\n            <div className=\"mt-12 p-8 bg-blue-50 border border-blue-200 rounded-3xl shadow-inner-lg\">\n              <h3 className=\"text-3xl font-extrabold text-blue-700 mb-5\">🧠 分析结果：</h3>\n              <p className=\"text-gray-800 text-xl leading-relaxed whitespace-pre-line\">\n                {analysis}\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n    </DndProvider>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}