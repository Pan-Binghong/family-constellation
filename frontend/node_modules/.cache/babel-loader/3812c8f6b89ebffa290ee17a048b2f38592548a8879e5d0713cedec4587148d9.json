{"ast":null,"code":"var _jsxFileName = \"D:\\\\Code\\\\family-constellation\\\\frontend\\\\src\\\\FamilyMember.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useDrag } from 'react-dnd';\n\n// æ·»åŠ CSSåŠ¨ç”»æ ·å¼\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst style = document.createElement('style');\nstyle.textContent = `\n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(-4px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n  \n  @keyframes scaleIn {\n    from { opacity: 0; transform: scale(0.9); }\n    to { opacity: 1; transform: scale(1); }\n  }\n`;\ndocument.head.appendChild(style);\nconst directionOrder = ['north', 'northeast', 'east', 'southeast', 'south', 'southwest', 'west', 'northwest'];\nconst directionAngle = {\n  north: 0,\n  northeast: 45,\n  east: 90,\n  southeast: 135,\n  south: 180,\n  southwest: 225,\n  west: 270,\n  northwest: 315\n};\nconst arrowPositions = {\n  // å¯¹äºæ–¹å½¢å’Œåœ†å½¢\n  north: {\n    top: -28,\n    left: '50%',\n    transform: 'translateX(-50%)'\n  },\n  // å‘ä¸Šè°ƒæ•´ï¼Œæ›´é è¿‘åœ†å½¢é¡¶éƒ¨\n  northeast: {\n    top: -20,\n    right: -20\n  },\n  // æ›´é è¿‘åœ†å½¢å³ä¸Šè§’\n  east: {\n    top: '50%',\n    right: -28,\n    transform: 'translateY(-50%)'\n  },\n  // å‘å³è°ƒæ•´ï¼Œæ›´é è¿‘åœ†å½¢å³ä¾§\n  southeast: {\n    bottom: -20,\n    right: -20\n  },\n  // æ›´é è¿‘åœ†å½¢å³ä¸‹è§’\n  south: {\n    bottom: -28,\n    left: '50%',\n    transform: 'translateX(-50%)'\n  },\n  // å‘ä¸‹è°ƒæ•´ï¼Œæ›´é è¿‘åœ†å½¢åº•éƒ¨\n  southwest: {\n    bottom: -20,\n    left: -20\n  },\n  // æ›´é è¿‘åœ†å½¢å·¦ä¸‹è§’\n  west: {\n    top: '50%',\n    left: -28,\n    transform: 'translateY(-50%)'\n  },\n  // å‘å·¦è°ƒæ•´ï¼Œæ›´é è¿‘åœ†å½¢å·¦ä¾§\n  northwest: {\n    top: -20,\n    left: -20\n  } // æ›´é è¿‘åœ†å½¢å·¦ä¸Šè§’\n};\nconst triangleArrowPositions = {\n  // é’ˆå¯¹ä¸‰è§’å½¢\n  north: {\n    top: -22,\n    left: '50%',\n    transform: 'translateX(-50%)'\n  },\n  // ä¸‰è§’å½¢é¡¶ç‚¹ï¼Œé€šå¸¸æ˜¯OKçš„\n  northeast: {\n    top: -16,\n    right: -16\n  },\n  // ä»è¾¹ç•Œæ¡†å³ä¸Šè§’å‘å¤–åç§»ï¼Œå°è¯•æ˜¾ç¤ºç®­å¤´\n  east: {\n    top: '50%',\n    right: -22,\n    transform: 'translateY(-50%)'\n  },\n  // æ²¿å³ä¾§è¾¹ï¼Œè°ƒæ•´Yåç§»å¯èƒ½éœ€è¦å¾®è°ƒ\n  southeast: {\n    bottom: -16,\n    right: -16\n  },\n  // ä»è¾¹ç•Œæ¡†å³ä¸‹è§’å‘å¤–åç§»\n  south: {\n    bottom: -22,\n    left: '50%',\n    transform: 'translateX(-50%)'\n  },\n  // ä¸‰è§’å½¢åº•è¾¹ä¸­å¿ƒï¼Œé€šå¸¸æ˜¯OKçš„\n  southwest: {\n    bottom: -16,\n    left: -16\n  },\n  // ä»è¾¹ç•Œæ¡†å·¦ä¸‹è§’å‘å¤–åç§»\n  west: {\n    top: '50%',\n    left: -22,\n    transform: 'translateY(-50%)'\n  },\n  // æ²¿å·¦ä¾§è¾¹ï¼Œè°ƒæ•´Yåç§»å¯èƒ½éœ€è¦å¾®è°ƒ\n  northwest: {\n    top: -16,\n    left: -16\n  } // ä»è¾¹ç•Œæ¡†å·¦ä¸Šè§’å‘å¤–åç§»\n};\nconst FamilyMember = ({\n  member,\n  onUpdate\n}) => {\n  _s();\n  const [dragOffset, setDragOffset] = useState(null);\n  const [{\n    isDragging\n  }, drag] = useDrag({\n    type: 'MEMBER',\n    item: () => {\n      // ä½¿ç”¨å½“å‰æœ€æ–°çš„åç§»é‡ï¼Œè€Œä¸æ˜¯çŠ¶æ€ä¸­å¯èƒ½è¿‡æ—¶çš„å€¼\n      const currentOffset = dragOffset;\n      console.log('ğŸ“¦ åˆ›å»ºæ‹–æ‹½é¡¹ç›®:', {\n        æˆå‘˜: member.name,\n        ID: member.id,\n        å½“å‰åç§»é‡: currentOffset\n      });\n      return {\n        id: member.id,\n        initialOffset: currentOffset,\n        // æ·»åŠ æˆå‘˜å½“å‰ä½ç½®ä½œä¸ºå¤‡ç”¨\n        memberCurrentPosition: {\n          x: member.x,\n          y: member.y\n        }\n      };\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    }),\n    end: (item, monitor) => {\n      console.log('ğŸ æ‹–æ‹½ç»“æŸ:', {\n        æˆå‘˜: member.name,\n        æ˜¯å¦æ”¾ç½®: monitor.didDrop(),\n        æ‹–æ‹½ç»“æœ: monitor.getDropResult()\n      });\n    }\n  });\n  const width = member.width || 72;\n  const height = member.height || 72;\n\n  // å¤„ç†æ‹–æ‹½å¼€å§‹æ—¶è®°å½•åç§»é‡\n  const handleMouseDown = useCallback(e => {\n    // å¦‚æœç‚¹å‡»çš„æ˜¯èœå•æŒ‰é’®æˆ–å…¶å­å…ƒç´ ï¼Œä¸å¤„ç†æ‹–æ‹½\n    if (e.target.closest('button')) {\n      console.log('ğŸš« ç‚¹å‡»äº†æŒ‰é’®ï¼Œè·³è¿‡æ‹–æ‹½å¤„ç†');\n      return;\n    }\n    const element = e.currentTarget;\n    const rect = element.getBoundingClientRect();\n\n    // è·å–ç”»å¸ƒä½ç½®ä¿¡æ¯\n    const canvas = document.getElementById('canvas-area');\n    const canvasRect = canvas ? canvas.getBoundingClientRect() : null;\n    const offset = {\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top\n    };\n    console.log('ğŸ¯ æ‹–æ‹½å¼€å§‹ - æˆå‘˜:', member.name, {\n      æˆå‘˜ID: member.id,\n      æˆå‘˜å½“å‰ä½ç½®: {\n        x: member.x,\n        y: member.y\n      },\n      æˆå‘˜å°ºå¯¸: {\n        width: width,\n        height: height\n      },\n      å…ƒç´ è¾¹ç•Œ: {\n        left: rect.left,\n        top: rect.top,\n        width: rect.width,\n        height: rect.height\n      },\n      ç”»å¸ƒè¾¹ç•Œ: canvasRect ? {\n        left: canvasRect.left,\n        top: canvasRect.top,\n        width: canvasRect.width,\n        height: canvasRect.height\n      } : null,\n      é¼ æ ‡ä½ç½®: {\n        clientX: e.clientX,\n        clientY: e.clientY\n      },\n      è®¡ç®—çš„åç§»é‡: offset,\n      'ğŸ“ åæ ‡åˆ†æ': {\n        'æˆå‘˜ç›¸å¯¹ç”»å¸ƒä½ç½®': canvasRect ? {\n          x: rect.left - canvasRect.left,\n          y: rect.top - canvasRect.top\n        } : 'ç”»å¸ƒæœªæ‰¾åˆ°',\n        'è€ƒè™‘è¾¹æ¡†çš„ç›¸å¯¹ä½ç½®': canvasRect ? {\n          x: rect.left - canvasRect.left - 4,\n          // å‡å»4pxè¾¹æ¡†\n          y: rect.top - canvasRect.top - 4 // å‡å»4pxè¾¹æ¡†\n        } : 'ç”»å¸ƒæœªæ‰¾åˆ°',\n        'å­˜å‚¨çš„åæ ‡': {\n          x: member.x,\n          y: member.y\n        },\n        'åæ ‡æ˜¯å¦åŒ¹é…ï¼ˆå«è¾¹æ¡†ä¿®æ­£ï¼‰': canvasRect ? Math.abs(rect.left - canvasRect.left - 4 - member.x) < 5 && Math.abs(rect.top - canvasRect.top - 4 - member.y) < 5 : false\n      }\n    });\n\n    // ç«‹å³è®¾ç½®åç§»é‡\n    setDragOffset(offset);\n\n    // åŒæ—¶ä¿å­˜åˆ°å…ƒç´ çš„dataå±æ€§ä¸­ä½œä¸ºå¤‡ä»½\n    element.setAttribute('data-drag-offset-x', offset.x.toString());\n    element.setAttribute('data-drag-offset-y', offset.y.toString());\n  }, [member.name, member.id, member.x, member.y, width, height]);\n  const [hovered, setHovered] = useState(false);\n  const [resizing, setResizing] = useState(false);\n  const [resizeStart, setResizeStart] = useState(null);\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [editingSize, setEditingSize] = useState(false);\n\n  // ç›‘å¬ESCé”®å…³é—­èœå•\n  useEffect(() => {\n    const handleKeyDown = e => {\n      if (e.key === 'Escape') {\n        setMenuOpen(false);\n        setEditingSize(false);\n      }\n    };\n    if (menuOpen || editingSize) {\n      document.addEventListener('keydown', handleKeyDown);\n      return () => document.removeEventListener('keydown', handleKeyDown);\n    }\n  }, [menuOpen, editingSize]);\n  const shape = member.gender === 'female' ? 'circle' : member.shape || 'square'; // ç¡®ä¿ shape åœ¨ validDirection ä¹‹å‰å®šä¹‰\n\n  const positionConfigForValidation = shape === 'triangle' ? triangleArrowPositions : arrowPositions;\n  const validDirection = member.direction && positionConfigForValidation[member.direction] ? member.direction : 'north';\n  const handleRotate = useCallback(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    const idx = directionOrder.indexOf(validDirection);\n    const next = directionOrder[(idx + 1) % directionOrder.length];\n    if (onUpdate) {\n      onUpdate(member.id, {\n        direction: next\n      });\n    }\n  }, [validDirection, member.id, onUpdate]);\n  const handleResizeMouseDown = useCallback(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setResizing(true);\n    setResizeStart({\n      x: e.clientX,\n      y: e.clientY,\n      width,\n      height\n    });\n    document.body.style.setProperty('cursor', 'nwse-resize', 'important');\n  }, [width, height]);\n  useEffect(() => {\n    if (!resizing || !resizeStart) return;\n    const handleMove = e => {\n      const dx = e.clientX - resizeStart.x;\n      const dy = e.clientY - resizeStart.y;\n      const delta = Math.max(Math.abs(dx), Math.abs(dy)) * (dx < 0 || dy < 0 ? -1 : 1);\n      const base = Math.max(resizeStart.width, resizeStart.height);\n      const newSize = Math.max(40, base + delta);\n      onUpdate && onUpdate(member.id, {\n        width: newSize,\n        height: newSize\n      });\n    };\n    const handleUp = () => {\n      setResizing(false);\n      setResizeStart(null);\n      document.body.style.cursor = '';\n    };\n    document.addEventListener('mousemove', handleMove);\n    document.addEventListener('mouseup', handleUp);\n    return () => {\n      document.removeEventListener('mousemove', handleMove);\n      document.removeEventListener('mouseup', handleUp);\n    };\n  }, [resizing, resizeStart, onUpdate, member.id]);\n  const renderDirectionTriangle = useCallback(() => {\n    const positionConfig = shape === 'triangle' ? triangleArrowPositions : arrowPositions;\n    const position = positionConfig[validDirection];\n    const angle = directionAngle[validDirection] || 0;\n    const baseTransform = position.transform || '';\n    const rotateTransform = `rotate(${angle}deg)`;\n    const combinedTransform = baseTransform ? `${baseTransform} ${rotateTransform}` : rotateTransform;\n    return /*#__PURE__*/_jsxDEV(\"svg\", {\n      width: \"22\",\n      height: \"22\",\n      style: {\n        position: 'absolute',\n        top: position.top,\n        left: position.left,\n        right: position.right,\n        bottom: position.bottom,\n        zIndex: 20,\n        transform: combinedTransform\n      },\n      children: /*#__PURE__*/_jsxDEV(\"polygon\", {\n        points: \"11,0 22,22 0,22\",\n        fill: \"#6366f1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this);\n  }, [validDirection, shape]);\n\n  // æ¸²æŸ“èœå•æŒ‰é’®\n  const renderMenuButton = useCallback(() => /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: e => {\n      e.stopPropagation();\n      setMenuOpen(!menuOpen);\n    },\n    style: {\n      position: 'absolute',\n      top: 4,\n      right: 4,\n      width: 20,\n      height: 20,\n      background: 'rgba(255, 255, 255, 0.9)',\n      border: '1px solid #d1d5db',\n      borderRadius: '50%',\n      cursor: 'pointer',\n      padding: 0,\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      zIndex: 25,\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n      opacity: hovered ? 1 : 0.7,\n      transition: 'opacity 0.2s ease',\n      pointerEvents: 'auto'\n    },\n    title: \"\\u66F4\\u591A\\u9009\\u9879\",\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      width: \"12\",\n      height: \"12\",\n      viewBox: \"0 0 24 24\",\n      fill: \"none\",\n      children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n        cx: \"12\",\n        cy: \"5\",\n        r: \"1.5\",\n        fill: \"#6b7280\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n        cx: \"12\",\n        cy: \"12\",\n        r: \"1.5\",\n        fill: \"#6b7280\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n        cx: \"12\",\n        cy: \"19\",\n        r: \"1.5\",\n        fill: \"#6b7280\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 253,\n    columnNumber: 5\n  }, this), [menuOpen, hovered]);\n\n  // èœå•é¡¹ç‚¹å‡»å¤„ç†\n  const handleMenuItemClick = useCallback((action, e) => {\n    e.stopPropagation();\n    setMenuOpen(false);\n    switch (action) {\n      case 'rotate':\n        handleRotate(e);\n        break;\n      case 'resize':\n        setEditingSize(true);\n        break;\n      case 'delete':\n        if (window.confirm(`ç¡®å®šè¦åˆ é™¤ ${member.name} å—ï¼Ÿ`)) {\n          onUpdate && onUpdate(member.id, {\n            delete: true\n          });\n        }\n        break;\n    }\n  }, [handleRotate, member.name, member.id, onUpdate]);\n\n  // æ¸²æŸ“ä¸‹æ‹‰èœå•\n  const renderDropdownMenu = useCallback(() => {\n    if (!menuOpen) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: 26,\n        right: 4,\n        background: 'white',\n        border: '1px solid #d1d5db',\n        borderRadius: '6px',\n        boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n        zIndex: 1000,\n        minWidth: '120px',\n        overflow: 'hidden'\n      },\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => handleMenuItemClick('rotate', e),\n        style: {\n          width: '100%',\n          padding: '8px 12px',\n          border: 'none',\n          background: 'white',\n          textAlign: 'left',\n          cursor: 'pointer',\n          fontSize: '12px',\n          color: '#374151',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '6px',\n          transition: 'background 0.15s'\n        },\n        onMouseEnter: e => e.target.style.background = '#f3f4f6',\n        onMouseLeave: e => e.target.style.background = 'white',\n        children: \"\\uD83D\\uDD04 \\u4FEE\\u6539\\u671D\\u5411\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => handleMenuItemClick('resize', e),\n        style: {\n          width: '100%',\n          padding: '8px 12px',\n          border: 'none',\n          background: 'white',\n          textAlign: 'left',\n          cursor: 'pointer',\n          fontSize: '12px',\n          color: '#374151',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '6px',\n          transition: 'background 0.15s'\n        },\n        onMouseEnter: e => e.target.style.background = '#f3f4f6',\n        onMouseLeave: e => e.target.style.background = 'white',\n        children: \"\\uD83D\\uDCCF \\u8BBE\\u7F6E\\u5927\\u5C0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: '1px',\n          background: '#e5e7eb',\n          margin: '4px 0'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => handleMenuItemClick('delete', e),\n        style: {\n          width: '100%',\n          padding: '8px 12px',\n          border: 'none',\n          background: 'white',\n          textAlign: 'left',\n          cursor: 'pointer',\n          fontSize: '12px',\n          color: '#ef4444',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '6px',\n          transition: 'background 0.15s'\n        },\n        onMouseEnter: e => e.target.style.background = '#fef2f2',\n        onMouseLeave: e => e.target.style.background = 'white',\n        children: \"\\uD83D\\uDDD1\\uFE0F \\u5220\\u9664\\u6210\\u5458\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 7\n    }, this);\n  }, [menuOpen, handleMenuItemClick]);\n\n  // æ¸²æŸ“å¤§å°ç¼–è¾‘å™¨\n  const renderSizeEditor = useCallback(() => {\n    if (!editingSize) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n        background: 'rgba(255, 255, 255, 0.95)',\n        border: '2px solid #6366f1',\n        borderRadius: '8px',\n        padding: '8px',\n        zIndex: 35,\n        boxShadow: '0 4px 12px rgba(0,0,0,0.2)',\n        display: 'flex',\n        alignItems: 'center',\n        gap: '6px',\n        animation: 'scaleIn 0.2s ease-out'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => {\n          e.stopPropagation();\n          const newSize = Math.max(40, width - 8);\n          onUpdate && onUpdate(member.id, {\n            width: newSize,\n            height: newSize\n          });\n        },\n        style: {\n          width: '24px',\n          height: '24px',\n          border: '1px solid #d1d5db',\n          borderRadius: '4px',\n          background: 'white',\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"12\",\n          height: \"12\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M5 12h14\",\n            stroke: \"#6b7280\",\n            strokeWidth: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          fontSize: '12px',\n          fontWeight: 'bold',\n          color: '#374151',\n          minWidth: '30px',\n          textAlign: 'center'\n        },\n        children: width\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => {\n          e.stopPropagation();\n          const newSize = Math.min(120, width + 8);\n          onUpdate && onUpdate(member.id, {\n            width: newSize,\n            height: newSize\n          });\n        },\n        style: {\n          width: '24px',\n          height: '24px',\n          border: '1px solid #d1d5db',\n          borderRadius: '4px',\n          background: 'white',\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"12\",\n          height: \"12\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M12 5v14M5 12h14\",\n            stroke: \"#6b7280\",\n            strokeWidth: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => {\n          e.stopPropagation();\n          setEditingSize(false);\n        },\n        style: {\n          width: '20px',\n          height: '20px',\n          border: 'none',\n          borderRadius: '4px',\n          background: '#ef4444',\n          color: 'white',\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          marginLeft: '4px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"10\",\n          height: \"10\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M18 6L6 18M6 6l12 12\",\n            stroke: \"white\",\n            strokeWidth: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 7\n    }, this);\n  }, [editingSize, width, member.id, onUpdate]);\n  const getContainerStyle = () => {\n    let baseStyle = {\n      width,\n      height,\n      minWidth: 40,\n      minHeight: 40,\n      cursor: isDragging ? 'grabbing' : 'grab',\n      opacity: isDragging ? 0.8 : 1,\n      background: hovered ? 'rgba(255,255,255,1)' : 'rgba(255,255,255,0.98)',\n      border: hovered ? '3px solid #6366f1' : '3px solid #a5b4fc',\n      boxShadow: hovered ? '0 8px 24px rgba(0,0,0,0.25)' : '0 6px 20px rgba(0,0,0,0.15)',\n      transition: 'all 0.2s ease',\n      transform: isDragging ? 'scale(1.02)' : hovered ? 'scale(1.05)' : 'scale(1)',\n      willChange: 'transform',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      userSelect: 'none',\n      position: 'relative'\n    };\n    switch (shape) {\n      case 'circle':\n        baseStyle.borderRadius = '50%';\n        break;\n      case 'triangle':\n        baseStyle.borderRadius = '0';\n        baseStyle.clipPath = 'polygon(50% 0%, 0% 100%, 100% 100%)';\n        break;\n      default:\n        baseStyle.borderRadius = '8px';\n        break;\n    }\n    return baseStyle;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    \"data-member-id\": member.id,\n    style: {\n      position: 'absolute',\n      left: member.x,\n      top: member.y,\n      zIndex: 2000\n      // æ·»åŠ è°ƒè¯•è¾¹æ¡†ï¼ˆå¯é€‰ï¼‰\n      // border: '1px dashed red'\n    },\n    onMouseEnter: () => {\n      console.log('ğŸ” é¼ æ ‡è¿›å…¥è§’è‰²:', member.name);\n      setHovered(true);\n    },\n    onMouseLeave: () => {\n      console.log('ğŸ” é¼ æ ‡ç¦»å¼€è§’è‰²:', member.name);\n      setHovered(false);\n    },\n    children: [process.env.NODE_ENV === 'development' && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: -20,\n        left: 0,\n        fontSize: '10px',\n        color: 'red',\n        background: 'rgba(255,255,255,0.8)',\n        padding: '2px 4px',\n        borderRadius: '2px',\n        zIndex: 3000,\n        pointerEvents: 'none'\n      },\n      children: [\"(\", Math.round(member.x), \", \", Math.round(member.y), \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: drag,\n      style: getContainerStyle(),\n      onMouseDown: handleMouseDown,\n      children: [renderDirectionTriangle(), member.isDeceased && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          top: '50%',\n          left: '50%',\n          transform: 'translate(-50%, -50%)',\n          fontSize: Math.min(width * 2, 60),\n          color: '#6b7280',\n          fontWeight: 'bold',\n          zIndex: 2001,\n          textShadow: '2px 2px 4px rgba(0,0,0,0.3)',\n          opacity: 0.6,\n          pointerEvents: 'none'\n        },\n        children: \"\\u2715\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: Math.max(12, Math.min(width * 0.38, 28)),\n          marginBottom: 2,\n          transition: 'transform 0.2s'\n        },\n        children: member.icon || 'ğŸ§‘'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontWeight: 'bold',\n          color: '#1f2937',\n          fontSize: Math.max(10, width / 6.5),\n          marginBottom: 1\n        },\n        children: member.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: Math.max(8, width / 8),\n          color: '#3b82f6',\n          fontWeight: 600,\n          letterSpacing: 0.5\n        },\n        children: member.role\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 9\n      }, this), renderMenuButton(), renderDropdownMenu(), renderSizeEditor()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 579,\n      columnNumber: 7\n    }, this), menuOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        zIndex: 15\n      },\n      onClick: () => setMenuOpen(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 538,\n    columnNumber: 9\n  }, this);\n};\n_s(FamilyMember, \"FqTBJNxBLiEda1frlQzYyzjP+wA=\", false, function () {\n  return [useDrag];\n});\n_c = FamilyMember;\nexport default FamilyMember;\nvar _c;\n$RefreshReg$(_c, \"FamilyMember\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useDrag","jsxDEV","_jsxDEV","style","document","createElement","textContent","head","appendChild","directionOrder","directionAngle","north","northeast","east","southeast","south","southwest","west","northwest","arrowPositions","top","left","transform","right","bottom","triangleArrowPositions","FamilyMember","member","onUpdate","_s","dragOffset","setDragOffset","isDragging","drag","type","item","currentOffset","console","log","æˆå‘˜","name","ID","id","å½“å‰åç§»é‡","initialOffset","memberCurrentPosition","x","y","collect","monitor","end","æ˜¯å¦æ”¾ç½®","didDrop","æ‹–æ‹½ç»“æœ","getDropResult","width","height","handleMouseDown","e","target","closest","element","currentTarget","rect","getBoundingClientRect","canvas","getElementById","canvasRect","offset","clientX","clientY","æˆå‘˜ID","æˆå‘˜å½“å‰ä½ç½®","æˆå‘˜å°ºå¯¸","å…ƒç´ è¾¹ç•Œ","ç”»å¸ƒè¾¹ç•Œ","é¼ æ ‡ä½ç½®","è®¡ç®—çš„åç§»é‡","Math","abs","setAttribute","toString","hovered","setHovered","resizing","setResizing","resizeStart","setResizeStart","menuOpen","setMenuOpen","editingSize","setEditingSize","handleKeyDown","key","addEventListener","removeEventListener","shape","gender","positionConfigForValidation","validDirection","direction","handleRotate","preventDefault","stopPropagation","idx","indexOf","next","length","handleResizeMouseDown","body","setProperty","handleMove","dx","dy","delta","max","base","newSize","handleUp","cursor","renderDirectionTriangle","positionConfig","position","angle","baseTransform","rotateTransform","combinedTransform","zIndex","children","points","fill","fileName","_jsxFileName","lineNumber","columnNumber","renderMenuButton","onClick","background","border","borderRadius","padding","display","alignItems","justifyContent","boxShadow","opacity","transition","pointerEvents","title","viewBox","cx","cy","r","handleMenuItemClick","action","window","confirm","delete","renderDropdownMenu","minWidth","overflow","textAlign","fontSize","color","gap","onMouseEnter","onMouseLeave","margin","renderSizeEditor","animation","d","stroke","strokeWidth","fontWeight","min","marginLeft","getContainerStyle","baseStyle","minHeight","willChange","flexDirection","userSelect","clipPath","process","env","NODE_ENV","round","ref","onMouseDown","isDeceased","textShadow","marginBottom","icon","letterSpacing","role","_c","$RefreshReg$"],"sources":["D:/Code/family-constellation/frontend/src/FamilyMember.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useDrag } from 'react-dnd';\r\n\r\n// æ·»åŠ CSSåŠ¨ç”»æ ·å¼\r\nconst style = document.createElement('style');\r\nstyle.textContent = `\r\n  @keyframes fadeIn {\r\n    from { opacity: 0; transform: translateY(-4px); }\r\n    to { opacity: 1; transform: translateY(0); }\r\n  }\r\n  \r\n  @keyframes scaleIn {\r\n    from { opacity: 0; transform: scale(0.9); }\r\n    to { opacity: 1; transform: scale(1); }\r\n  }\r\n`;\r\ndocument.head.appendChild(style);\r\n\r\nconst directionOrder = ['north', 'northeast', 'east', 'southeast', 'south', 'southwest', 'west', 'northwest'];\r\nconst directionAngle = { \r\n  north: 0, \r\n  northeast: 45, \r\n  east: 90, \r\n  southeast: 135, \r\n  south: 180, \r\n  southwest: 225, \r\n  west: 270, \r\n  northwest: 315 \r\n};\r\n\r\nconst arrowPositions = {\r\n  // å¯¹äºæ–¹å½¢å’Œåœ†å½¢\r\n  north: { top: -28, left: '50%', transform: 'translateX(-50%)' }, // å‘ä¸Šè°ƒæ•´ï¼Œæ›´é è¿‘åœ†å½¢é¡¶éƒ¨\r\n  northeast: { top: -20, right: -20 }, // æ›´é è¿‘åœ†å½¢å³ä¸Šè§’\r\n  east: { top: '50%', right: -28, transform: 'translateY(-50%)' }, // å‘å³è°ƒæ•´ï¼Œæ›´é è¿‘åœ†å½¢å³ä¾§\r\n  southeast: { bottom: -20, right: -20 }, // æ›´é è¿‘åœ†å½¢å³ä¸‹è§’\r\n  south: { bottom: -28, left: '50%', transform: 'translateX(-50%)' }, // å‘ä¸‹è°ƒæ•´ï¼Œæ›´é è¿‘åœ†å½¢åº•éƒ¨\r\n  southwest: { bottom: -20, left: -20 }, // æ›´é è¿‘åœ†å½¢å·¦ä¸‹è§’\r\n  west: { top: '50%', left: -28, transform: 'translateY(-50%)' }, // å‘å·¦è°ƒæ•´ï¼Œæ›´é è¿‘åœ†å½¢å·¦ä¾§\r\n  northwest: { top: -20, left: -20 } // æ›´é è¿‘åœ†å½¢å·¦ä¸Šè§’\r\n};\r\n\r\nconst triangleArrowPositions = {\r\n  // é’ˆå¯¹ä¸‰è§’å½¢\r\n  north: { top: -22, left: '50%', transform: 'translateX(-50%)' }, // ä¸‰è§’å½¢é¡¶ç‚¹ï¼Œé€šå¸¸æ˜¯OKçš„\r\n  northeast: { top: -16, right: -16 }, // ä»è¾¹ç•Œæ¡†å³ä¸Šè§’å‘å¤–åç§»ï¼Œå°è¯•æ˜¾ç¤ºç®­å¤´\r\n  east: { top: '50%', right: -22, transform: 'translateY(-50%)' }, // æ²¿å³ä¾§è¾¹ï¼Œè°ƒæ•´Yåç§»å¯èƒ½éœ€è¦å¾®è°ƒ\r\n  southeast: { bottom: -16, right: -16 }, // ä»è¾¹ç•Œæ¡†å³ä¸‹è§’å‘å¤–åç§»\r\n  south: { bottom: -22, left: '50%', transform: 'translateX(-50%)' }, // ä¸‰è§’å½¢åº•è¾¹ä¸­å¿ƒï¼Œé€šå¸¸æ˜¯OKçš„\r\n  southwest: { bottom: -16, left: -16 }, // ä»è¾¹ç•Œæ¡†å·¦ä¸‹è§’å‘å¤–åç§»\r\n  west: { top: '50%', left: -22, transform: 'translateY(-50%)' }, // æ²¿å·¦ä¾§è¾¹ï¼Œè°ƒæ•´Yåç§»å¯èƒ½éœ€è¦å¾®è°ƒ\r\n  northwest: { top: -16, left: -16 } // ä»è¾¹ç•Œæ¡†å·¦ä¸Šè§’å‘å¤–åç§»\r\n};\r\n\r\nconst FamilyMember = ({ member, onUpdate }) => {\r\n  const [dragOffset, setDragOffset] = useState(null);\r\n  \r\n  const [{ isDragging }, drag] = useDrag({\r\n    type: 'MEMBER',\r\n    item: () => {\r\n      // ä½¿ç”¨å½“å‰æœ€æ–°çš„åç§»é‡ï¼Œè€Œä¸æ˜¯çŠ¶æ€ä¸­å¯èƒ½è¿‡æ—¶çš„å€¼\r\n      const currentOffset = dragOffset;\r\n      console.log('ğŸ“¦ åˆ›å»ºæ‹–æ‹½é¡¹ç›®:', { \r\n        æˆå‘˜: member.name, \r\n        ID: member.id, \r\n        å½“å‰åç§»é‡: currentOffset \r\n      });\r\n      return { \r\n        id: member.id,\r\n        initialOffset: currentOffset,\r\n        // æ·»åŠ æˆå‘˜å½“å‰ä½ç½®ä½œä¸ºå¤‡ç”¨\r\n        memberCurrentPosition: { x: member.x, y: member.y }\r\n      };\r\n    },\r\n    collect: monitor => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n    end: (item, monitor) => {\r\n      console.log('ğŸ æ‹–æ‹½ç»“æŸ:', {\r\n        æˆå‘˜: member.name,\r\n        æ˜¯å¦æ”¾ç½®: monitor.didDrop(),\r\n        æ‹–æ‹½ç»“æœ: monitor.getDropResult()\r\n      });\r\n    }\r\n  });\r\n\r\n  const width = member.width || 72;\r\n  const height = member.height || 72;\r\n\r\n  // å¤„ç†æ‹–æ‹½å¼€å§‹æ—¶è®°å½•åç§»é‡\r\n  const handleMouseDown = useCallback((e) => {\r\n    // å¦‚æœç‚¹å‡»çš„æ˜¯èœå•æŒ‰é’®æˆ–å…¶å­å…ƒç´ ï¼Œä¸å¤„ç†æ‹–æ‹½\r\n    if (e.target.closest('button')) {\r\n      console.log('ğŸš« ç‚¹å‡»äº†æŒ‰é’®ï¼Œè·³è¿‡æ‹–æ‹½å¤„ç†');\r\n      return;\r\n    }\r\n    \r\n    const element = e.currentTarget;\r\n    const rect = element.getBoundingClientRect();\r\n    \r\n    // è·å–ç”»å¸ƒä½ç½®ä¿¡æ¯\r\n    const canvas = document.getElementById('canvas-area');\r\n    const canvasRect = canvas ? canvas.getBoundingClientRect() : null;\r\n    \r\n    const offset = {\r\n      x: e.clientX - rect.left,\r\n      y: e.clientY - rect.top\r\n    };\r\n    \r\n    console.log('ğŸ¯ æ‹–æ‹½å¼€å§‹ - æˆå‘˜:', member.name, {\r\n      æˆå‘˜ID: member.id,\r\n      æˆå‘˜å½“å‰ä½ç½®: { x: member.x, y: member.y },\r\n      æˆå‘˜å°ºå¯¸: { width: width, height: height },\r\n      å…ƒç´ è¾¹ç•Œ: {\r\n        left: rect.left,\r\n        top: rect.top,\r\n        width: rect.width,\r\n        height: rect.height\r\n      },\r\n      ç”»å¸ƒè¾¹ç•Œ: canvasRect ? {\r\n        left: canvasRect.left,\r\n        top: canvasRect.top,\r\n        width: canvasRect.width,\r\n        height: canvasRect.height\r\n      } : null,\r\n      é¼ æ ‡ä½ç½®: { clientX: e.clientX, clientY: e.clientY },\r\n      è®¡ç®—çš„åç§»é‡: offset,\r\n             'ğŸ“ åæ ‡åˆ†æ': {\r\n         'æˆå‘˜ç›¸å¯¹ç”»å¸ƒä½ç½®': canvasRect ? {\r\n           x: rect.left - canvasRect.left,\r\n           y: rect.top - canvasRect.top\r\n         } : 'ç”»å¸ƒæœªæ‰¾åˆ°',\r\n         'è€ƒè™‘è¾¹æ¡†çš„ç›¸å¯¹ä½ç½®': canvasRect ? {\r\n           x: rect.left - canvasRect.left - 4, // å‡å»4pxè¾¹æ¡†\r\n           y: rect.top - canvasRect.top - 4   // å‡å»4pxè¾¹æ¡†\r\n         } : 'ç”»å¸ƒæœªæ‰¾åˆ°',\r\n         'å­˜å‚¨çš„åæ ‡': { x: member.x, y: member.y },\r\n         'åæ ‡æ˜¯å¦åŒ¹é…ï¼ˆå«è¾¹æ¡†ä¿®æ­£ï¼‰': canvasRect ? \r\n           (Math.abs((rect.left - canvasRect.left - 4) - member.x) < 5 && \r\n            Math.abs((rect.top - canvasRect.top - 4) - member.y) < 5) : false\r\n       }\r\n    });\r\n    \r\n    // ç«‹å³è®¾ç½®åç§»é‡\r\n    setDragOffset(offset);\r\n    \r\n    // åŒæ—¶ä¿å­˜åˆ°å…ƒç´ çš„dataå±æ€§ä¸­ä½œä¸ºå¤‡ä»½\r\n    element.setAttribute('data-drag-offset-x', offset.x.toString());\r\n    element.setAttribute('data-drag-offset-y', offset.y.toString());\r\n  }, [member.name, member.id, member.x, member.y, width, height]);\r\n\r\n  const [hovered, setHovered] = useState(false);\r\n  const [resizing, setResizing] = useState(false);\r\n  const [resizeStart, setResizeStart] = useState(null);\r\n  const [menuOpen, setMenuOpen] = useState(false);\r\n  const [editingSize, setEditingSize] = useState(false);\r\n\r\n  // ç›‘å¬ESCé”®å…³é—­èœå•\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      if (e.key === 'Escape') {\r\n        setMenuOpen(false);\r\n        setEditingSize(false);\r\n      }\r\n    };\r\n\r\n    if (menuOpen || editingSize) {\r\n      document.addEventListener('keydown', handleKeyDown);\r\n      return () => document.removeEventListener('keydown', handleKeyDown);\r\n    }\r\n  }, [menuOpen, editingSize]);\r\n\r\n  const shape = member.gender === 'female' ? 'circle' : member.shape || 'square'; // ç¡®ä¿ shape åœ¨ validDirection ä¹‹å‰å®šä¹‰\r\n\r\n  const positionConfigForValidation = shape === 'triangle' ? triangleArrowPositions : arrowPositions;\r\n  const validDirection = member.direction && positionConfigForValidation[member.direction] ? member.direction : 'north';\r\n\r\n  const handleRotate = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const idx = directionOrder.indexOf(validDirection);\r\n    const next = directionOrder[(idx + 1) % directionOrder.length];\r\n    if (onUpdate) {\r\n      onUpdate(member.id, { direction: next });\r\n    }\r\n  }, [validDirection, member.id, onUpdate]);\r\n\r\n  const handleResizeMouseDown = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setResizing(true);\r\n    setResizeStart({ x: e.clientX, y: e.clientY, width, height });\r\n    document.body.style.setProperty('cursor', 'nwse-resize', 'important');\r\n  }, [width, height]);\r\n\r\n  useEffect(() => {\r\n    if (!resizing || !resizeStart) return;\r\n\r\n    const handleMove = (e) => {\r\n      const dx = e.clientX - resizeStart.x;\r\n      const dy = e.clientY - resizeStart.y;\r\n      const delta = Math.max(Math.abs(dx), Math.abs(dy)) * (dx < 0 || dy < 0 ? -1 : 1);\r\n      const base = Math.max(resizeStart.width, resizeStart.height);\r\n      const newSize = Math.max(40, base + delta);\r\n\r\n      onUpdate && onUpdate(member.id, { width: newSize, height: newSize });\r\n    };\r\n\r\n    const handleUp = () => {\r\n      setResizing(false);\r\n      setResizeStart(null);\r\n      document.body.style.cursor = '';\r\n    };\r\n\r\n    document.addEventListener('mousemove', handleMove);\r\n    document.addEventListener('mouseup', handleUp);\r\n\r\n    return () => {\r\n      document.removeEventListener('mousemove', handleMove);\r\n      document.removeEventListener('mouseup', handleUp);\r\n    };\r\n  }, [resizing, resizeStart, onUpdate, member.id]);\r\n\r\n  const renderDirectionTriangle = useCallback(() => {\r\n    const positionConfig = shape === 'triangle' ? triangleArrowPositions : arrowPositions;\r\n    const position = positionConfig[validDirection];\r\n    const angle = directionAngle[validDirection] || 0;\r\n    const baseTransform = position.transform || '';\r\n    const rotateTransform = `rotate(${angle}deg)`;\r\n    const combinedTransform = baseTransform ? `${baseTransform} ${rotateTransform}` : rotateTransform;\r\n\r\n    return (\r\n      <svg\r\n        width=\"22\"\r\n        height=\"22\"\r\n        style={{\r\n          position: 'absolute',\r\n          top: position.top,\r\n          left: position.left,\r\n          right: position.right,\r\n          bottom: position.bottom,\r\n          zIndex: 20,\r\n          transform: combinedTransform\r\n        }}\r\n      >\r\n        <polygon points=\"11,0 22,22 0,22\" fill=\"#6366f1\" />\r\n      </svg>\r\n    );\r\n  }, [validDirection, shape]);\r\n\r\n  // æ¸²æŸ“èœå•æŒ‰é’®\r\n  const renderMenuButton = useCallback(() => (\r\n    <button\r\n      onClick={(e) => {\r\n        e.stopPropagation();\r\n        setMenuOpen(!menuOpen);\r\n      }}\r\n      style={{\r\n        position: 'absolute',\r\n        top: 4,\r\n        right: 4,\r\n        width: 20,\r\n        height: 20,\r\n        background: 'rgba(255, 255, 255, 0.9)',\r\n        border: '1px solid #d1d5db',\r\n        borderRadius: '50%',\r\n        cursor: 'pointer',\r\n        padding: 0,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 25,\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n        opacity: hovered ? 1 : 0.7,\r\n        transition: 'opacity 0.2s ease',\r\n        pointerEvents: 'auto'\r\n      }}\r\n      title=\"æ›´å¤šé€‰é¡¹\"\r\n    >\r\n      <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n        <circle cx=\"12\" cy=\"5\" r=\"1.5\" fill=\"#6b7280\"/>\r\n        <circle cx=\"12\" cy=\"12\" r=\"1.5\" fill=\"#6b7280\"/>\r\n        <circle cx=\"12\" cy=\"19\" r=\"1.5\" fill=\"#6b7280\"/>\r\n      </svg>\r\n    </button>\r\n  ), [menuOpen, hovered]);\r\n\r\n  // èœå•é¡¹ç‚¹å‡»å¤„ç†\r\n  const handleMenuItemClick = useCallback((action, e) => {\r\n    e.stopPropagation();\r\n    setMenuOpen(false);\r\n    \r\n    switch(action) {\r\n      case 'rotate':\r\n        handleRotate(e);\r\n        break;\r\n      case 'resize':\r\n        setEditingSize(true);\r\n        break;\r\n      case 'delete':\r\n        if (window.confirm(`ç¡®å®šè¦åˆ é™¤ ${member.name} å—ï¼Ÿ`)) {\r\n          onUpdate && onUpdate(member.id, { delete: true });\r\n        }\r\n        break;\r\n    }\r\n  }, [handleRotate, member.name, member.id, onUpdate]);\r\n\r\n  // æ¸²æŸ“ä¸‹æ‹‰èœå•\r\n  const renderDropdownMenu = useCallback(() => {\r\n    if (!menuOpen) return null;\r\n\r\n    return (\r\n      <div\r\n        style={{\r\n          position: 'absolute',\r\n          top: 26,\r\n          right: 4,\r\n          background: 'white',\r\n          border: '1px solid #d1d5db',\r\n          borderRadius: '6px',\r\n          boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\r\n          zIndex: 1000,\r\n          minWidth: '120px',\r\n          overflow: 'hidden'\r\n        }}\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        <button\r\n          onClick={(e) => handleMenuItemClick('rotate', e)}\r\n          style={{\r\n            width: '100%',\r\n            padding: '8px 12px',\r\n            border: 'none',\r\n            background: 'white',\r\n            textAlign: 'left',\r\n            cursor: 'pointer',\r\n            fontSize: '12px',\r\n            color: '#374151',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '6px',\r\n            transition: 'background 0.15s'\r\n          }}\r\n          onMouseEnter={(e) => e.target.style.background = '#f3f4f6'}\r\n          onMouseLeave={(e) => e.target.style.background = 'white'}\r\n        >\r\n          ğŸ”„ ä¿®æ”¹æœå‘\r\n        </button>\r\n        \r\n        <button\r\n          onClick={(e) => handleMenuItemClick('resize', e)}\r\n          style={{\r\n            width: '100%',\r\n            padding: '8px 12px',\r\n            border: 'none',\r\n            background: 'white',\r\n            textAlign: 'left',\r\n            cursor: 'pointer',\r\n            fontSize: '12px',\r\n            color: '#374151',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '6px',\r\n            transition: 'background 0.15s'\r\n          }}\r\n          onMouseEnter={(e) => e.target.style.background = '#f3f4f6'}\r\n          onMouseLeave={(e) => e.target.style.background = 'white'}\r\n        >\r\n          ğŸ“ è®¾ç½®å¤§å°\r\n        </button>\r\n        \r\n        <div style={{ height: '1px', background: '#e5e7eb', margin: '4px 0' }} />\r\n        \r\n        <button\r\n          onClick={(e) => handleMenuItemClick('delete', e)}\r\n          style={{\r\n            width: '100%',\r\n            padding: '8px 12px',\r\n            border: 'none',\r\n            background: 'white',\r\n            textAlign: 'left',\r\n            cursor: 'pointer',\r\n            fontSize: '12px',\r\n            color: '#ef4444',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '6px',\r\n            transition: 'background 0.15s'\r\n          }}\r\n          onMouseEnter={(e) => e.target.style.background = '#fef2f2'}\r\n          onMouseLeave={(e) => e.target.style.background = 'white'}\r\n        >\r\n          ğŸ—‘ï¸ åˆ é™¤æˆå‘˜\r\n        </button>\r\n      </div>\r\n    );\r\n  }, [menuOpen, handleMenuItemClick]);\r\n\r\n  // æ¸²æŸ“å¤§å°ç¼–è¾‘å™¨\r\n  const renderSizeEditor = useCallback(() => {\r\n    if (!editingSize) return null;\r\n\r\n    return (\r\n      <div\r\n        style={{\r\n          position: 'absolute',\r\n          top: '50%',\r\n          left: '50%',\r\n          transform: 'translate(-50%, -50%)',\r\n          background: 'rgba(255, 255, 255, 0.95)',\r\n          border: '2px solid #6366f1',\r\n          borderRadius: '8px',\r\n          padding: '8px',\r\n          zIndex: 35,\r\n                     boxShadow: '0 4px 12px rgba(0,0,0,0.2)',\r\n           display: 'flex',\r\n           alignItems: 'center',\r\n           gap: '6px',\r\n           animation: 'scaleIn 0.2s ease-out'\r\n        }}\r\n      >\r\n        <button\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            const newSize = Math.max(40, width - 8);\r\n            onUpdate && onUpdate(member.id, { width: newSize, height: newSize });\r\n          }}\r\n          style={{\r\n            width: '24px',\r\n            height: '24px',\r\n            border: '1px solid #d1d5db',\r\n            borderRadius: '4px',\r\n            background: 'white',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n          }}\r\n        >\r\n          <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n            <path d=\"M5 12h14\" stroke=\"#6b7280\" strokeWidth=\"2\"/>\r\n          </svg>\r\n        </button>\r\n        \r\n        <span style={{ fontSize: '12px', fontWeight: 'bold', color: '#374151', minWidth: '30px', textAlign: 'center' }}>\r\n          {width}\r\n        </span>\r\n        \r\n        <button\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            const newSize = Math.min(120, width + 8);\r\n            onUpdate && onUpdate(member.id, { width: newSize, height: newSize });\r\n          }}\r\n          style={{\r\n            width: '24px',\r\n            height: '24px',\r\n            border: '1px solid #d1d5db',\r\n            borderRadius: '4px',\r\n            background: 'white',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n          }}\r\n        >\r\n          <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n            <path d=\"M12 5v14M5 12h14\" stroke=\"#6b7280\" strokeWidth=\"2\"/>\r\n          </svg>\r\n        </button>\r\n        \r\n        <button\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            setEditingSize(false);\r\n          }}\r\n          style={{\r\n            width: '20px',\r\n            height: '20px',\r\n            border: 'none',\r\n            borderRadius: '4px',\r\n            background: '#ef4444',\r\n            color: 'white',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            marginLeft: '4px'\r\n          }}\r\n        >\r\n          <svg width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n            <path d=\"M18 6L6 18M6 6l12 12\" stroke=\"white\" strokeWidth=\"2\"/>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    );\r\n  }, [editingSize, width, member.id, onUpdate]);\r\n\r\n  const getContainerStyle = () => {\r\n    let baseStyle = {\r\n      width,\r\n      height,\r\n      minWidth: 40,\r\n      minHeight: 40,\r\n      cursor: isDragging ? 'grabbing' : 'grab',\r\n      opacity: isDragging ? 0.8 : 1,\r\n      background: hovered ? 'rgba(255,255,255,1)' : 'rgba(255,255,255,0.98)',\r\n      border: hovered ? '3px solid #6366f1' : '3px solid #a5b4fc',\r\n      boxShadow: hovered ? '0 8px 24px rgba(0,0,0,0.25)' : '0 6px 20px rgba(0,0,0,0.15)',\r\n      transition: 'all 0.2s ease',\r\n      transform: isDragging ? 'scale(1.02)' : (hovered ? 'scale(1.05)' : 'scale(1)'),\r\n      willChange: 'transform',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      userSelect: 'none',\r\n      position: 'relative',\r\n    };\r\n\r\n    switch (shape) {\r\n      case 'circle':\r\n        baseStyle.borderRadius = '50%';\r\n        break;\r\n      case 'triangle':\r\n        baseStyle.borderRadius = '0';\r\n        baseStyle.clipPath = 'polygon(50% 0%, 0% 100%, 100% 100%)';\r\n        break;\r\n      default:\r\n        baseStyle.borderRadius = '8px';\r\n        break;\r\n    }\r\n\r\n    return baseStyle;\r\n  };\r\n\r\n        return (\r\n        <div\r\n          data-member-id={member.id}\r\n          style={{ \r\n            position: 'absolute', \r\n            left: member.x, \r\n            top: member.y, \r\n            zIndex: 2000,\r\n            // æ·»åŠ è°ƒè¯•è¾¹æ¡†ï¼ˆå¯é€‰ï¼‰\r\n            // border: '1px dashed red'\r\n          }}\r\n          onMouseEnter={() => {\r\n            console.log('ğŸ” é¼ æ ‡è¿›å…¥è§’è‰²:', member.name);\r\n            setHovered(true);\r\n          }}\r\n          onMouseLeave={() => {\r\n            console.log('ğŸ” é¼ æ ‡ç¦»å¼€è§’è‰²:', member.name);\r\n            setHovered(false);\r\n          }}\r\n        >\r\n      {/* è°ƒè¯•ä¿¡æ¯æ˜¾ç¤ºï¼ˆå¼€å‘æ—¶å¯è§ï¼‰ */}\r\n      {process.env.NODE_ENV === 'development' && (\r\n        <div \r\n          style={{\r\n            position: 'absolute',\r\n            top: -20,\r\n            left: 0,\r\n            fontSize: '10px',\r\n            color: 'red',\r\n            background: 'rgba(255,255,255,0.8)',\r\n            padding: '2px 4px',\r\n            borderRadius: '2px',\r\n            zIndex: 3000,\r\n            pointerEvents: 'none'\r\n          }}\r\n        >\r\n          ({Math.round(member.x)}, {Math.round(member.y)})\r\n        </div>\r\n      )}\r\n      \r\n\r\n\r\n      <div \r\n        ref={drag} \r\n        style={getContainerStyle()}\r\n        onMouseDown={handleMouseDown}\r\n      >\r\n        {renderDirectionTriangle()}\r\n\r\n        {member.isDeceased && (\r\n          <div\r\n            style={{\r\n              position: 'absolute',\r\n              top: '50%',\r\n              left: '50%',\r\n              transform: 'translate(-50%, -50%)',\r\n              fontSize: Math.min(width * 2, 60),\r\n              color: '#6b7280',\r\n              fontWeight: 'bold',\r\n              zIndex: 2001,\r\n              textShadow: '2px 2px 4px rgba(0,0,0,0.3)',\r\n              opacity: 0.6,\r\n              pointerEvents: 'none',\r\n            }}\r\n          >\r\n            âœ•\r\n          </div>\r\n        )}\r\n\r\n        <div\r\n          style={{\r\n            fontSize: Math.max(12, Math.min(width * 0.38, 28)),\r\n            marginBottom: 2,\r\n            transition: 'transform 0.2s',\r\n          }}\r\n        >\r\n          {member.icon || 'ğŸ§‘'}\r\n        </div>\r\n        <div\r\n          style={{\r\n            fontWeight: 'bold',\r\n            color: '#1f2937',\r\n            fontSize: Math.max(10, width / 6.5),\r\n            marginBottom: 1,\r\n          }}\r\n        >\r\n          {member.name}\r\n        </div>\r\n        <div\r\n          style={{\r\n            fontSize: Math.max(8, width / 8),\r\n            color: '#3b82f6',\r\n            fontWeight: 600,\r\n            letterSpacing: 0.5,\r\n          }}\r\n        >\r\n          {member.role}\r\n        </div>\r\n\r\n        {renderMenuButton()}\r\n        {renderDropdownMenu()}\r\n        {renderSizeEditor()}\r\n      </div>\r\n      \r\n      {/* ç‚¹å‡»å¤–éƒ¨å…³é—­èœå• */}\r\n      {menuOpen && (\r\n        <div\r\n          style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            zIndex: 15\r\n          }}\r\n          onClick={() => setMenuOpen(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FamilyMember;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,OAAO,QAAQ,WAAW;;AAEnC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;AAC7CF,KAAK,CAACG,WAAW,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACDF,QAAQ,CAACG,IAAI,CAACC,WAAW,CAACL,KAAK,CAAC;AAEhC,MAAMM,cAAc,GAAG,CAAC,OAAO,EAAE,WAAW,EAAE,MAAM,EAAE,WAAW,EAAE,OAAO,EAAE,WAAW,EAAE,MAAM,EAAE,WAAW,CAAC;AAC7G,MAAMC,cAAc,GAAG;EACrBC,KAAK,EAAE,CAAC;EACRC,SAAS,EAAE,EAAE;EACbC,IAAI,EAAE,EAAE;EACRC,SAAS,EAAE,GAAG;EACdC,KAAK,EAAE,GAAG;EACVC,SAAS,EAAE,GAAG;EACdC,IAAI,EAAE,GAAG;EACTC,SAAS,EAAE;AACb,CAAC;AAED,MAAMC,cAAc,GAAG;EACrB;EACAR,KAAK,EAAE;IAAES,GAAG,EAAE,CAAC,EAAE;IAAEC,IAAI,EAAE,KAAK;IAAEC,SAAS,EAAE;EAAmB,CAAC;EAAE;EACjEV,SAAS,EAAE;IAAEQ,GAAG,EAAE,CAAC,EAAE;IAAEG,KAAK,EAAE,CAAC;EAAG,CAAC;EAAE;EACrCV,IAAI,EAAE;IAAEO,GAAG,EAAE,KAAK;IAAEG,KAAK,EAAE,CAAC,EAAE;IAAED,SAAS,EAAE;EAAmB,CAAC;EAAE;EACjER,SAAS,EAAE;IAAEU,MAAM,EAAE,CAAC,EAAE;IAAED,KAAK,EAAE,CAAC;EAAG,CAAC;EAAE;EACxCR,KAAK,EAAE;IAAES,MAAM,EAAE,CAAC,EAAE;IAAEH,IAAI,EAAE,KAAK;IAAEC,SAAS,EAAE;EAAmB,CAAC;EAAE;EACpEN,SAAS,EAAE;IAAEQ,MAAM,EAAE,CAAC,EAAE;IAAEH,IAAI,EAAE,CAAC;EAAG,CAAC;EAAE;EACvCJ,IAAI,EAAE;IAAEG,GAAG,EAAE,KAAK;IAAEC,IAAI,EAAE,CAAC,EAAE;IAAEC,SAAS,EAAE;EAAmB,CAAC;EAAE;EAChEJ,SAAS,EAAE;IAAEE,GAAG,EAAE,CAAC,EAAE;IAAEC,IAAI,EAAE,CAAC;EAAG,CAAC,CAAC;AACrC,CAAC;AAED,MAAMI,sBAAsB,GAAG;EAC7B;EACAd,KAAK,EAAE;IAAES,GAAG,EAAE,CAAC,EAAE;IAAEC,IAAI,EAAE,KAAK;IAAEC,SAAS,EAAE;EAAmB,CAAC;EAAE;EACjEV,SAAS,EAAE;IAAEQ,GAAG,EAAE,CAAC,EAAE;IAAEG,KAAK,EAAE,CAAC;EAAG,CAAC;EAAE;EACrCV,IAAI,EAAE;IAAEO,GAAG,EAAE,KAAK;IAAEG,KAAK,EAAE,CAAC,EAAE;IAAED,SAAS,EAAE;EAAmB,CAAC;EAAE;EACjER,SAAS,EAAE;IAAEU,MAAM,EAAE,CAAC,EAAE;IAAED,KAAK,EAAE,CAAC;EAAG,CAAC;EAAE;EACxCR,KAAK,EAAE;IAAES,MAAM,EAAE,CAAC,EAAE;IAAEH,IAAI,EAAE,KAAK;IAAEC,SAAS,EAAE;EAAmB,CAAC;EAAE;EACpEN,SAAS,EAAE;IAAEQ,MAAM,EAAE,CAAC,EAAE;IAAEH,IAAI,EAAE,CAAC;EAAG,CAAC;EAAE;EACvCJ,IAAI,EAAE;IAAEG,GAAG,EAAE,KAAK;IAAEC,IAAI,EAAE,CAAC,EAAE;IAAEC,SAAS,EAAE;EAAmB,CAAC;EAAE;EAChEJ,SAAS,EAAE;IAAEE,GAAG,EAAE,CAAC,EAAE;IAAEC,IAAI,EAAE,CAAC;EAAG,CAAC,CAAC;AACrC,CAAC;AAED,MAAMK,YAAY,GAAGA,CAAC;EAAEC,MAAM;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC7C,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGlC,QAAQ,CAAC,IAAI,CAAC;EAElD,MAAM,CAAC;IAAEmC;EAAW,CAAC,EAAEC,IAAI,CAAC,GAAGjC,OAAO,CAAC;IACrCkC,IAAI,EAAE,QAAQ;IACdC,IAAI,EAAEA,CAAA,KAAM;MACV;MACA,MAAMC,aAAa,GAAGN,UAAU;MAChCO,OAAO,CAACC,GAAG,CAAC,YAAY,EAAE;QACxBC,EAAE,EAAEZ,MAAM,CAACa,IAAI;QACfC,EAAE,EAAEd,MAAM,CAACe,EAAE;QACbC,KAAK,EAAEP;MACT,CAAC,CAAC;MACF,OAAO;QACLM,EAAE,EAAEf,MAAM,CAACe,EAAE;QACbE,aAAa,EAAER,aAAa;QAC5B;QACAS,qBAAqB,EAAE;UAAEC,CAAC,EAAEnB,MAAM,CAACmB,CAAC;UAAEC,CAAC,EAAEpB,MAAM,CAACoB;QAAE;MACpD,CAAC;IACH,CAAC;IACDC,OAAO,EAAEC,OAAO,KAAK;MACnBjB,UAAU,EAAEiB,OAAO,CAACjB,UAAU,CAAC;IACjC,CAAC,CAAC;IACFkB,GAAG,EAAEA,CAACf,IAAI,EAAEc,OAAO,KAAK;MACtBZ,OAAO,CAACC,GAAG,CAAC,UAAU,EAAE;QACtBC,EAAE,EAAEZ,MAAM,CAACa,IAAI;QACfW,IAAI,EAAEF,OAAO,CAACG,OAAO,CAAC,CAAC;QACvBC,IAAI,EAAEJ,OAAO,CAACK,aAAa,CAAC;MAC9B,CAAC,CAAC;IACJ;EACF,CAAC,CAAC;EAEF,MAAMC,KAAK,GAAG5B,MAAM,CAAC4B,KAAK,IAAI,EAAE;EAChC,MAAMC,MAAM,GAAG7B,MAAM,CAAC6B,MAAM,IAAI,EAAE;;EAElC;EACA,MAAMC,eAAe,GAAG1D,WAAW,CAAE2D,CAAC,IAAK;IACzC;IACA,IAAIA,CAAC,CAACC,MAAM,CAACC,OAAO,CAAC,QAAQ,CAAC,EAAE;MAC9BvB,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;MAC9B;IACF;IAEA,MAAMuB,OAAO,GAAGH,CAAC,CAACI,aAAa;IAC/B,MAAMC,IAAI,GAAGF,OAAO,CAACG,qBAAqB,CAAC,CAAC;;IAE5C;IACA,MAAMC,MAAM,GAAG7D,QAAQ,CAAC8D,cAAc,CAAC,aAAa,CAAC;IACrD,MAAMC,UAAU,GAAGF,MAAM,GAAGA,MAAM,CAACD,qBAAqB,CAAC,CAAC,GAAG,IAAI;IAEjE,MAAMI,MAAM,GAAG;MACbtB,CAAC,EAAEY,CAAC,CAACW,OAAO,GAAGN,IAAI,CAAC1C,IAAI;MACxB0B,CAAC,EAAEW,CAAC,CAACY,OAAO,GAAGP,IAAI,CAAC3C;IACtB,CAAC;IAEDiB,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEX,MAAM,CAACa,IAAI,EAAE;MACxC+B,IAAI,EAAE5C,MAAM,CAACe,EAAE;MACf8B,MAAM,EAAE;QAAE1B,CAAC,EAAEnB,MAAM,CAACmB,CAAC;QAAEC,CAAC,EAAEpB,MAAM,CAACoB;MAAE,CAAC;MACpC0B,IAAI,EAAE;QAAElB,KAAK,EAAEA,KAAK;QAAEC,MAAM,EAAEA;MAAO,CAAC;MACtCkB,IAAI,EAAE;QACJrD,IAAI,EAAE0C,IAAI,CAAC1C,IAAI;QACfD,GAAG,EAAE2C,IAAI,CAAC3C,GAAG;QACbmC,KAAK,EAAEQ,IAAI,CAACR,KAAK;QACjBC,MAAM,EAAEO,IAAI,CAACP;MACf,CAAC;MACDmB,IAAI,EAAER,UAAU,GAAG;QACjB9C,IAAI,EAAE8C,UAAU,CAAC9C,IAAI;QACrBD,GAAG,EAAE+C,UAAU,CAAC/C,GAAG;QACnBmC,KAAK,EAAEY,UAAU,CAACZ,KAAK;QACvBC,MAAM,EAAEW,UAAU,CAACX;MACrB,CAAC,GAAG,IAAI;MACRoB,IAAI,EAAE;QAAEP,OAAO,EAAEX,CAAC,CAACW,OAAO;QAAEC,OAAO,EAAEZ,CAAC,CAACY;MAAQ,CAAC;MAChDO,MAAM,EAAET,MAAM;MACP,SAAS,EAAE;QACf,UAAU,EAAED,UAAU,GAAG;UACvBrB,CAAC,EAAEiB,IAAI,CAAC1C,IAAI,GAAG8C,UAAU,CAAC9C,IAAI;UAC9B0B,CAAC,EAAEgB,IAAI,CAAC3C,GAAG,GAAG+C,UAAU,CAAC/C;QAC3B,CAAC,GAAG,OAAO;QACX,WAAW,EAAE+C,UAAU,GAAG;UACxBrB,CAAC,EAAEiB,IAAI,CAAC1C,IAAI,GAAG8C,UAAU,CAAC9C,IAAI,GAAG,CAAC;UAAE;UACpC0B,CAAC,EAAEgB,IAAI,CAAC3C,GAAG,GAAG+C,UAAU,CAAC/C,GAAG,GAAG,CAAC,CAAG;QACrC,CAAC,GAAG,OAAO;QACX,OAAO,EAAE;UAAE0B,CAAC,EAAEnB,MAAM,CAACmB,CAAC;UAAEC,CAAC,EAAEpB,MAAM,CAACoB;QAAE,CAAC;QACrC,eAAe,EAAEoB,UAAU,GACxBW,IAAI,CAACC,GAAG,CAAEhB,IAAI,CAAC1C,IAAI,GAAG8C,UAAU,CAAC9C,IAAI,GAAG,CAAC,GAAIM,MAAM,CAACmB,CAAC,CAAC,GAAG,CAAC,IAC1DgC,IAAI,CAACC,GAAG,CAAEhB,IAAI,CAAC3C,GAAG,GAAG+C,UAAU,CAAC/C,GAAG,GAAG,CAAC,GAAIO,MAAM,CAACoB,CAAC,CAAC,GAAG,CAAC,GAAI;MACjE;IACH,CAAC,CAAC;;IAEF;IACAhB,aAAa,CAACqC,MAAM,CAAC;;IAErB;IACAP,OAAO,CAACmB,YAAY,CAAC,oBAAoB,EAAEZ,MAAM,CAACtB,CAAC,CAACmC,QAAQ,CAAC,CAAC,CAAC;IAC/DpB,OAAO,CAACmB,YAAY,CAAC,oBAAoB,EAAEZ,MAAM,CAACrB,CAAC,CAACkC,QAAQ,CAAC,CAAC,CAAC;EACjE,CAAC,EAAE,CAACtD,MAAM,CAACa,IAAI,EAAEb,MAAM,CAACe,EAAE,EAAEf,MAAM,CAACmB,CAAC,EAAEnB,MAAM,CAACoB,CAAC,EAAEQ,KAAK,EAAEC,MAAM,CAAC,CAAC;EAE/D,MAAM,CAAC0B,OAAO,EAAEC,UAAU,CAAC,GAAGtF,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACuF,QAAQ,EAAEC,WAAW,CAAC,GAAGxF,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACyF,WAAW,EAAEC,cAAc,CAAC,GAAG1F,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAAC2F,QAAQ,EAAEC,WAAW,CAAC,GAAG5F,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAAC6F,WAAW,EAAEC,cAAc,CAAC,GAAG9F,QAAQ,CAAC,KAAK,CAAC;;EAErD;EACAC,SAAS,CAAC,MAAM;IACd,MAAM8F,aAAa,GAAIlC,CAAC,IAAK;MAC3B,IAAIA,CAAC,CAACmC,GAAG,KAAK,QAAQ,EAAE;QACtBJ,WAAW,CAAC,KAAK,CAAC;QAClBE,cAAc,CAAC,KAAK,CAAC;MACvB;IACF,CAAC;IAED,IAAIH,QAAQ,IAAIE,WAAW,EAAE;MAC3BtF,QAAQ,CAAC0F,gBAAgB,CAAC,SAAS,EAAEF,aAAa,CAAC;MACnD,OAAO,MAAMxF,QAAQ,CAAC2F,mBAAmB,CAAC,SAAS,EAAEH,aAAa,CAAC;IACrE;EACF,CAAC,EAAE,CAACJ,QAAQ,EAAEE,WAAW,CAAC,CAAC;EAE3B,MAAMM,KAAK,GAAGrE,MAAM,CAACsE,MAAM,KAAK,QAAQ,GAAG,QAAQ,GAAGtE,MAAM,CAACqE,KAAK,IAAI,QAAQ,CAAC,CAAC;;EAEhF,MAAME,2BAA2B,GAAGF,KAAK,KAAK,UAAU,GAAGvE,sBAAsB,GAAGN,cAAc;EAClG,MAAMgF,cAAc,GAAGxE,MAAM,CAACyE,SAAS,IAAIF,2BAA2B,CAACvE,MAAM,CAACyE,SAAS,CAAC,GAAGzE,MAAM,CAACyE,SAAS,GAAG,OAAO;EAErH,MAAMC,YAAY,GAAGtG,WAAW,CAAE2D,CAAC,IAAK;IACtCA,CAAC,CAAC4C,cAAc,CAAC,CAAC;IAClB5C,CAAC,CAAC6C,eAAe,CAAC,CAAC;IACnB,MAAMC,GAAG,GAAG/F,cAAc,CAACgG,OAAO,CAACN,cAAc,CAAC;IAClD,MAAMO,IAAI,GAAGjG,cAAc,CAAC,CAAC+F,GAAG,GAAG,CAAC,IAAI/F,cAAc,CAACkG,MAAM,CAAC;IAC9D,IAAI/E,QAAQ,EAAE;MACZA,QAAQ,CAACD,MAAM,CAACe,EAAE,EAAE;QAAE0D,SAAS,EAAEM;MAAK,CAAC,CAAC;IAC1C;EACF,CAAC,EAAE,CAACP,cAAc,EAAExE,MAAM,CAACe,EAAE,EAAEd,QAAQ,CAAC,CAAC;EAEzC,MAAMgF,qBAAqB,GAAG7G,WAAW,CAAE2D,CAAC,IAAK;IAC/CA,CAAC,CAAC4C,cAAc,CAAC,CAAC;IAClB5C,CAAC,CAAC6C,eAAe,CAAC,CAAC;IACnBlB,WAAW,CAAC,IAAI,CAAC;IACjBE,cAAc,CAAC;MAAEzC,CAAC,EAAEY,CAAC,CAACW,OAAO;MAAEtB,CAAC,EAAEW,CAAC,CAACY,OAAO;MAAEf,KAAK;MAAEC;IAAO,CAAC,CAAC;IAC7DpD,QAAQ,CAACyG,IAAI,CAAC1G,KAAK,CAAC2G,WAAW,CAAC,QAAQ,EAAE,aAAa,EAAE,WAAW,CAAC;EACvE,CAAC,EAAE,CAACvD,KAAK,EAAEC,MAAM,CAAC,CAAC;EAEnB1D,SAAS,CAAC,MAAM;IACd,IAAI,CAACsF,QAAQ,IAAI,CAACE,WAAW,EAAE;IAE/B,MAAMyB,UAAU,GAAIrD,CAAC,IAAK;MACxB,MAAMsD,EAAE,GAAGtD,CAAC,CAACW,OAAO,GAAGiB,WAAW,CAACxC,CAAC;MACpC,MAAMmE,EAAE,GAAGvD,CAAC,CAACY,OAAO,GAAGgB,WAAW,CAACvC,CAAC;MACpC,MAAMmE,KAAK,GAAGpC,IAAI,CAACqC,GAAG,CAACrC,IAAI,CAACC,GAAG,CAACiC,EAAE,CAAC,EAAElC,IAAI,CAACC,GAAG,CAACkC,EAAE,CAAC,CAAC,IAAID,EAAE,GAAG,CAAC,IAAIC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;MAChF,MAAMG,IAAI,GAAGtC,IAAI,CAACqC,GAAG,CAAC7B,WAAW,CAAC/B,KAAK,EAAE+B,WAAW,CAAC9B,MAAM,CAAC;MAC5D,MAAM6D,OAAO,GAAGvC,IAAI,CAACqC,GAAG,CAAC,EAAE,EAAEC,IAAI,GAAGF,KAAK,CAAC;MAE1CtF,QAAQ,IAAIA,QAAQ,CAACD,MAAM,CAACe,EAAE,EAAE;QAAEa,KAAK,EAAE8D,OAAO;QAAE7D,MAAM,EAAE6D;MAAQ,CAAC,CAAC;IACtE,CAAC;IAED,MAAMC,QAAQ,GAAGA,CAAA,KAAM;MACrBjC,WAAW,CAAC,KAAK,CAAC;MAClBE,cAAc,CAAC,IAAI,CAAC;MACpBnF,QAAQ,CAACyG,IAAI,CAAC1G,KAAK,CAACoH,MAAM,GAAG,EAAE;IACjC,CAAC;IAEDnH,QAAQ,CAAC0F,gBAAgB,CAAC,WAAW,EAAEiB,UAAU,CAAC;IAClD3G,QAAQ,CAAC0F,gBAAgB,CAAC,SAAS,EAAEwB,QAAQ,CAAC;IAE9C,OAAO,MAAM;MACXlH,QAAQ,CAAC2F,mBAAmB,CAAC,WAAW,EAAEgB,UAAU,CAAC;MACrD3G,QAAQ,CAAC2F,mBAAmB,CAAC,SAAS,EAAEuB,QAAQ,CAAC;IACnD,CAAC;EACH,CAAC,EAAE,CAAClC,QAAQ,EAAEE,WAAW,EAAE1D,QAAQ,EAAED,MAAM,CAACe,EAAE,CAAC,CAAC;EAEhD,MAAM8E,uBAAuB,GAAGzH,WAAW,CAAC,MAAM;IAChD,MAAM0H,cAAc,GAAGzB,KAAK,KAAK,UAAU,GAAGvE,sBAAsB,GAAGN,cAAc;IACrF,MAAMuG,QAAQ,GAAGD,cAAc,CAACtB,cAAc,CAAC;IAC/C,MAAMwB,KAAK,GAAGjH,cAAc,CAACyF,cAAc,CAAC,IAAI,CAAC;IACjD,MAAMyB,aAAa,GAAGF,QAAQ,CAACpG,SAAS,IAAI,EAAE;IAC9C,MAAMuG,eAAe,GAAG,UAAUF,KAAK,MAAM;IAC7C,MAAMG,iBAAiB,GAAGF,aAAa,GAAG,GAAGA,aAAa,IAAIC,eAAe,EAAE,GAAGA,eAAe;IAEjG,oBACE3H,OAAA;MACEqD,KAAK,EAAC,IAAI;MACVC,MAAM,EAAC,IAAI;MACXrD,KAAK,EAAE;QACLuH,QAAQ,EAAE,UAAU;QACpBtG,GAAG,EAAEsG,QAAQ,CAACtG,GAAG;QACjBC,IAAI,EAAEqG,QAAQ,CAACrG,IAAI;QACnBE,KAAK,EAAEmG,QAAQ,CAACnG,KAAK;QACrBC,MAAM,EAAEkG,QAAQ,CAAClG,MAAM;QACvBuG,MAAM,EAAE,EAAE;QACVzG,SAAS,EAAEwG;MACb,CAAE;MAAAE,QAAA,eAEF9H,OAAA;QAAS+H,MAAM,EAAC,iBAAiB;QAACC,IAAI,EAAC;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChD,CAAC;EAEV,CAAC,EAAE,CAACnC,cAAc,EAAEH,KAAK,CAAC,CAAC;;EAE3B;EACA,MAAMuC,gBAAgB,GAAGxI,WAAW,CAAC,mBACnCG,OAAA;IACEsI,OAAO,EAAG9E,CAAC,IAAK;MACdA,CAAC,CAAC6C,eAAe,CAAC,CAAC;MACnBd,WAAW,CAAC,CAACD,QAAQ,CAAC;IACxB,CAAE;IACFrF,KAAK,EAAE;MACLuH,QAAQ,EAAE,UAAU;MACpBtG,GAAG,EAAE,CAAC;MACNG,KAAK,EAAE,CAAC;MACRgC,KAAK,EAAE,EAAE;MACTC,MAAM,EAAE,EAAE;MACViF,UAAU,EAAE,0BAA0B;MACtCC,MAAM,EAAE,mBAAmB;MAC3BC,YAAY,EAAE,KAAK;MACnBpB,MAAM,EAAE,SAAS;MACjBqB,OAAO,EAAE,CAAC;MACVC,OAAO,EAAE,MAAM;MACfC,UAAU,EAAE,QAAQ;MACpBC,cAAc,EAAE,QAAQ;MACxBhB,MAAM,EAAE,EAAE;MACViB,SAAS,EAAE,2BAA2B;MACtCC,OAAO,EAAE/D,OAAO,GAAG,CAAC,GAAG,GAAG;MAC1BgE,UAAU,EAAE,mBAAmB;MAC/BC,aAAa,EAAE;IACjB,CAAE;IACFC,KAAK,EAAC,0BAAM;IAAApB,QAAA,eAEZ9H,OAAA;MAAKqD,KAAK,EAAC,IAAI;MAACC,MAAM,EAAC,IAAI;MAAC6F,OAAO,EAAC,WAAW;MAACnB,IAAI,EAAC,MAAM;MAAAF,QAAA,gBACzD9H,OAAA;QAAQoJ,EAAE,EAAC,IAAI;QAACC,EAAE,EAAC,GAAG;QAACC,CAAC,EAAC,KAAK;QAACtB,IAAI,EAAC;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,eAC/CpI,OAAA;QAAQoJ,EAAE,EAAC,IAAI;QAACC,EAAE,EAAC,IAAI;QAACC,CAAC,EAAC,KAAK;QAACtB,IAAI,EAAC;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,eAChDpI,OAAA;QAAQoJ,EAAE,EAAC,IAAI;QAACC,EAAE,EAAC,IAAI;QAACC,CAAC,EAAC,KAAK;QAACtB,IAAI,EAAC;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7C;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CACT,EAAE,CAAC9C,QAAQ,EAAEN,OAAO,CAAC,CAAC;;EAEvB;EACA,MAAMuE,mBAAmB,GAAG1J,WAAW,CAAC,CAAC2J,MAAM,EAAEhG,CAAC,KAAK;IACrDA,CAAC,CAAC6C,eAAe,CAAC,CAAC;IACnBd,WAAW,CAAC,KAAK,CAAC;IAElB,QAAOiE,MAAM;MACX,KAAK,QAAQ;QACXrD,YAAY,CAAC3C,CAAC,CAAC;QACf;MACF,KAAK,QAAQ;QACXiC,cAAc,CAAC,IAAI,CAAC;QACpB;MACF,KAAK,QAAQ;QACX,IAAIgE,MAAM,CAACC,OAAO,CAAC,SAASjI,MAAM,CAACa,IAAI,KAAK,CAAC,EAAE;UAC7CZ,QAAQ,IAAIA,QAAQ,CAACD,MAAM,CAACe,EAAE,EAAE;YAAEmH,MAAM,EAAE;UAAK,CAAC,CAAC;QACnD;QACA;IACJ;EACF,CAAC,EAAE,CAACxD,YAAY,EAAE1E,MAAM,CAACa,IAAI,EAAEb,MAAM,CAACe,EAAE,EAAEd,QAAQ,CAAC,CAAC;;EAEpD;EACA,MAAMkI,kBAAkB,GAAG/J,WAAW,CAAC,MAAM;IAC3C,IAAI,CAACyF,QAAQ,EAAE,OAAO,IAAI;IAE1B,oBACEtF,OAAA;MACEC,KAAK,EAAE;QACLuH,QAAQ,EAAE,UAAU;QACpBtG,GAAG,EAAE,EAAE;QACPG,KAAK,EAAE,CAAC;QACRkH,UAAU,EAAE,OAAO;QACnBC,MAAM,EAAE,mBAAmB;QAC3BC,YAAY,EAAE,KAAK;QACnBK,SAAS,EAAE,6BAA6B;QACxCjB,MAAM,EAAE,IAAI;QACZgC,QAAQ,EAAE,OAAO;QACjBC,QAAQ,EAAE;MACZ,CAAE;MACFxB,OAAO,EAAG9E,CAAC,IAAKA,CAAC,CAAC6C,eAAe,CAAC,CAAE;MAAAyB,QAAA,gBAEpC9H,OAAA;QACEsI,OAAO,EAAG9E,CAAC,IAAK+F,mBAAmB,CAAC,QAAQ,EAAE/F,CAAC,CAAE;QACjDvD,KAAK,EAAE;UACLoD,KAAK,EAAE,MAAM;UACbqF,OAAO,EAAE,UAAU;UACnBF,MAAM,EAAE,MAAM;UACdD,UAAU,EAAE,OAAO;UACnBwB,SAAS,EAAE,MAAM;UACjB1C,MAAM,EAAE,SAAS;UACjB2C,QAAQ,EAAE,MAAM;UAChBC,KAAK,EAAE,SAAS;UAChBtB,OAAO,EAAE,MAAM;UACfC,UAAU,EAAE,QAAQ;UACpBsB,GAAG,EAAE,KAAK;UACVlB,UAAU,EAAE;QACd,CAAE;QACFmB,YAAY,EAAG3G,CAAC,IAAKA,CAAC,CAACC,MAAM,CAACxD,KAAK,CAACsI,UAAU,GAAG,SAAU;QAC3D6B,YAAY,EAAG5G,CAAC,IAAKA,CAAC,CAACC,MAAM,CAACxD,KAAK,CAACsI,UAAU,GAAG,OAAQ;QAAAT,QAAA,EAC1D;MAED;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAETpI,OAAA;QACEsI,OAAO,EAAG9E,CAAC,IAAK+F,mBAAmB,CAAC,QAAQ,EAAE/F,CAAC,CAAE;QACjDvD,KAAK,EAAE;UACLoD,KAAK,EAAE,MAAM;UACbqF,OAAO,EAAE,UAAU;UACnBF,MAAM,EAAE,MAAM;UACdD,UAAU,EAAE,OAAO;UACnBwB,SAAS,EAAE,MAAM;UACjB1C,MAAM,EAAE,SAAS;UACjB2C,QAAQ,EAAE,MAAM;UAChBC,KAAK,EAAE,SAAS;UAChBtB,OAAO,EAAE,MAAM;UACfC,UAAU,EAAE,QAAQ;UACpBsB,GAAG,EAAE,KAAK;UACVlB,UAAU,EAAE;QACd,CAAE;QACFmB,YAAY,EAAG3G,CAAC,IAAKA,CAAC,CAACC,MAAM,CAACxD,KAAK,CAACsI,UAAU,GAAG,SAAU;QAC3D6B,YAAY,EAAG5G,CAAC,IAAKA,CAAC,CAACC,MAAM,CAACxD,KAAK,CAACsI,UAAU,GAAG,OAAQ;QAAAT,QAAA,EAC1D;MAED;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAETpI,OAAA;QAAKC,KAAK,EAAE;UAAEqD,MAAM,EAAE,KAAK;UAAEiF,UAAU,EAAE,SAAS;UAAE8B,MAAM,EAAE;QAAQ;MAAE;QAAApC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAEzEpI,OAAA;QACEsI,OAAO,EAAG9E,CAAC,IAAK+F,mBAAmB,CAAC,QAAQ,EAAE/F,CAAC,CAAE;QACjDvD,KAAK,EAAE;UACLoD,KAAK,EAAE,MAAM;UACbqF,OAAO,EAAE,UAAU;UACnBF,MAAM,EAAE,MAAM;UACdD,UAAU,EAAE,OAAO;UACnBwB,SAAS,EAAE,MAAM;UACjB1C,MAAM,EAAE,SAAS;UACjB2C,QAAQ,EAAE,MAAM;UAChBC,KAAK,EAAE,SAAS;UAChBtB,OAAO,EAAE,MAAM;UACfC,UAAU,EAAE,QAAQ;UACpBsB,GAAG,EAAE,KAAK;UACVlB,UAAU,EAAE;QACd,CAAE;QACFmB,YAAY,EAAG3G,CAAC,IAAKA,CAAC,CAACC,MAAM,CAACxD,KAAK,CAACsI,UAAU,GAAG,SAAU;QAC3D6B,YAAY,EAAG5G,CAAC,IAAKA,CAAC,CAACC,MAAM,CAACxD,KAAK,CAACsI,UAAU,GAAG,OAAQ;QAAAT,QAAA,EAC1D;MAED;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAEV,CAAC,EAAE,CAAC9C,QAAQ,EAAEiE,mBAAmB,CAAC,CAAC;;EAEnC;EACA,MAAMe,gBAAgB,GAAGzK,WAAW,CAAC,MAAM;IACzC,IAAI,CAAC2F,WAAW,EAAE,OAAO,IAAI;IAE7B,oBACExF,OAAA;MACEC,KAAK,EAAE;QACLuH,QAAQ,EAAE,UAAU;QACpBtG,GAAG,EAAE,KAAK;QACVC,IAAI,EAAE,KAAK;QACXC,SAAS,EAAE,uBAAuB;QAClCmH,UAAU,EAAE,2BAA2B;QACvCC,MAAM,EAAE,mBAAmB;QAC3BC,YAAY,EAAE,KAAK;QACnBC,OAAO,EAAE,KAAK;QACdb,MAAM,EAAE,EAAE;QACCiB,SAAS,EAAE,4BAA4B;QACjDH,OAAO,EAAE,MAAM;QACfC,UAAU,EAAE,QAAQ;QACpBsB,GAAG,EAAE,KAAK;QACVK,SAAS,EAAE;MACd,CAAE;MAAAzC,QAAA,gBAEF9H,OAAA;QACEsI,OAAO,EAAG9E,CAAC,IAAK;UACdA,CAAC,CAAC6C,eAAe,CAAC,CAAC;UACnB,MAAMc,OAAO,GAAGvC,IAAI,CAACqC,GAAG,CAAC,EAAE,EAAE5D,KAAK,GAAG,CAAC,CAAC;UACvC3B,QAAQ,IAAIA,QAAQ,CAACD,MAAM,CAACe,EAAE,EAAE;YAAEa,KAAK,EAAE8D,OAAO;YAAE7D,MAAM,EAAE6D;UAAQ,CAAC,CAAC;QACtE,CAAE;QACFlH,KAAK,EAAE;UACLoD,KAAK,EAAE,MAAM;UACbC,MAAM,EAAE,MAAM;UACdkF,MAAM,EAAE,mBAAmB;UAC3BC,YAAY,EAAE,KAAK;UACnBF,UAAU,EAAE,OAAO;UACnBlB,MAAM,EAAE,SAAS;UACjBsB,OAAO,EAAE,MAAM;UACfC,UAAU,EAAE,QAAQ;UACpBC,cAAc,EAAE;QAClB,CAAE;QAAAf,QAAA,eAEF9H,OAAA;UAAKqD,KAAK,EAAC,IAAI;UAACC,MAAM,EAAC,IAAI;UAAC6F,OAAO,EAAC,WAAW;UAACnB,IAAI,EAAC,MAAM;UAAAF,QAAA,eACzD9H,OAAA;YAAMwK,CAAC,EAAC,UAAU;YAACC,MAAM,EAAC,SAAS;YAACC,WAAW,EAAC;UAAG;YAAAzC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClD;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC,eAETpI,OAAA;QAAMC,KAAK,EAAE;UAAE+J,QAAQ,EAAE,MAAM;UAAEW,UAAU,EAAE,MAAM;UAAEV,KAAK,EAAE,SAAS;UAAEJ,QAAQ,EAAE,MAAM;UAAEE,SAAS,EAAE;QAAS,CAAE;QAAAjC,QAAA,EAC5GzE;MAAK;QAAA4E,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,eAEPpI,OAAA;QACEsI,OAAO,EAAG9E,CAAC,IAAK;UACdA,CAAC,CAAC6C,eAAe,CAAC,CAAC;UACnB,MAAMc,OAAO,GAAGvC,IAAI,CAACgG,GAAG,CAAC,GAAG,EAAEvH,KAAK,GAAG,CAAC,CAAC;UACxC3B,QAAQ,IAAIA,QAAQ,CAACD,MAAM,CAACe,EAAE,EAAE;YAAEa,KAAK,EAAE8D,OAAO;YAAE7D,MAAM,EAAE6D;UAAQ,CAAC,CAAC;QACtE,CAAE;QACFlH,KAAK,EAAE;UACLoD,KAAK,EAAE,MAAM;UACbC,MAAM,EAAE,MAAM;UACdkF,MAAM,EAAE,mBAAmB;UAC3BC,YAAY,EAAE,KAAK;UACnBF,UAAU,EAAE,OAAO;UACnBlB,MAAM,EAAE,SAAS;UACjBsB,OAAO,EAAE,MAAM;UACfC,UAAU,EAAE,QAAQ;UACpBC,cAAc,EAAE;QAClB,CAAE;QAAAf,QAAA,eAEF9H,OAAA;UAAKqD,KAAK,EAAC,IAAI;UAACC,MAAM,EAAC,IAAI;UAAC6F,OAAO,EAAC,WAAW;UAACnB,IAAI,EAAC,MAAM;UAAAF,QAAA,eACzD9H,OAAA;YAAMwK,CAAC,EAAC,kBAAkB;YAACC,MAAM,EAAC,SAAS;YAACC,WAAW,EAAC;UAAG;YAAAzC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1D;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC,eAETpI,OAAA;QACEsI,OAAO,EAAG9E,CAAC,IAAK;UACdA,CAAC,CAAC6C,eAAe,CAAC,CAAC;UACnBZ,cAAc,CAAC,KAAK,CAAC;QACvB,CAAE;QACFxF,KAAK,EAAE;UACLoD,KAAK,EAAE,MAAM;UACbC,MAAM,EAAE,MAAM;UACdkF,MAAM,EAAE,MAAM;UACdC,YAAY,EAAE,KAAK;UACnBF,UAAU,EAAE,SAAS;UACrB0B,KAAK,EAAE,OAAO;UACd5C,MAAM,EAAE,SAAS;UACjBsB,OAAO,EAAE,MAAM;UACfC,UAAU,EAAE,QAAQ;UACpBC,cAAc,EAAE,QAAQ;UACxBgC,UAAU,EAAE;QACd,CAAE;QAAA/C,QAAA,eAEF9H,OAAA;UAAKqD,KAAK,EAAC,IAAI;UAACC,MAAM,EAAC,IAAI;UAAC6F,OAAO,EAAC,WAAW;UAACnB,IAAI,EAAC,MAAM;UAAAF,QAAA,eACzD9H,OAAA;YAAMwK,CAAC,EAAC,sBAAsB;YAACC,MAAM,EAAC,OAAO;YAACC,WAAW,EAAC;UAAG;YAAAzC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5D;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAEV,CAAC,EAAE,CAAC5C,WAAW,EAAEnC,KAAK,EAAE5B,MAAM,CAACe,EAAE,EAAEd,QAAQ,CAAC,CAAC;EAE7C,MAAMoJ,iBAAiB,GAAGA,CAAA,KAAM;IAC9B,IAAIC,SAAS,GAAG;MACd1H,KAAK;MACLC,MAAM;MACNuG,QAAQ,EAAE,EAAE;MACZmB,SAAS,EAAE,EAAE;MACb3D,MAAM,EAAEvF,UAAU,GAAG,UAAU,GAAG,MAAM;MACxCiH,OAAO,EAAEjH,UAAU,GAAG,GAAG,GAAG,CAAC;MAC7ByG,UAAU,EAAEvD,OAAO,GAAG,qBAAqB,GAAG,wBAAwB;MACtEwD,MAAM,EAAExD,OAAO,GAAG,mBAAmB,GAAG,mBAAmB;MAC3D8D,SAAS,EAAE9D,OAAO,GAAG,6BAA6B,GAAG,6BAA6B;MAClFgE,UAAU,EAAE,eAAe;MAC3B5H,SAAS,EAAEU,UAAU,GAAG,aAAa,GAAIkD,OAAO,GAAG,aAAa,GAAG,UAAW;MAC9EiG,UAAU,EAAE,WAAW;MACvBtC,OAAO,EAAE,MAAM;MACfuC,aAAa,EAAE,QAAQ;MACvBtC,UAAU,EAAE,QAAQ;MACpBC,cAAc,EAAE,QAAQ;MACxBsC,UAAU,EAAE,MAAM;MAClB3D,QAAQ,EAAE;IACZ,CAAC;IAED,QAAQ1B,KAAK;MACX,KAAK,QAAQ;QACXiF,SAAS,CAACtC,YAAY,GAAG,KAAK;QAC9B;MACF,KAAK,UAAU;QACbsC,SAAS,CAACtC,YAAY,GAAG,GAAG;QAC5BsC,SAAS,CAACK,QAAQ,GAAG,qCAAqC;QAC1D;MACF;QACEL,SAAS,CAACtC,YAAY,GAAG,KAAK;QAC9B;IACJ;IAEA,OAAOsC,SAAS;EAClB,CAAC;EAEK,oBACA/K,OAAA;IACE,kBAAgByB,MAAM,CAACe,EAAG;IAC1BvC,KAAK,EAAE;MACLuH,QAAQ,EAAE,UAAU;MACpBrG,IAAI,EAAEM,MAAM,CAACmB,CAAC;MACd1B,GAAG,EAAEO,MAAM,CAACoB,CAAC;MACbgF,MAAM,EAAE;MACR;MACA;IACF,CAAE;IACFsC,YAAY,EAAEA,CAAA,KAAM;MAClBhI,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEX,MAAM,CAACa,IAAI,CAAC;MACtC2C,UAAU,CAAC,IAAI,CAAC;IAClB,CAAE;IACFmF,YAAY,EAAEA,CAAA,KAAM;MAClBjI,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEX,MAAM,CAACa,IAAI,CAAC;MACtC2C,UAAU,CAAC,KAAK,CAAC;IACnB,CAAE;IAAA6C,QAAA,GAGLuD,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,iBACrCvL,OAAA;MACEC,KAAK,EAAE;QACLuH,QAAQ,EAAE,UAAU;QACpBtG,GAAG,EAAE,CAAC,EAAE;QACRC,IAAI,EAAE,CAAC;QACP6I,QAAQ,EAAE,MAAM;QAChBC,KAAK,EAAE,KAAK;QACZ1B,UAAU,EAAE,uBAAuB;QACnCG,OAAO,EAAE,SAAS;QAClBD,YAAY,EAAE,KAAK;QACnBZ,MAAM,EAAE,IAAI;QACZoB,aAAa,EAAE;MACjB,CAAE;MAAAnB,QAAA,GACH,GACE,EAAClD,IAAI,CAAC4G,KAAK,CAAC/J,MAAM,CAACmB,CAAC,CAAC,EAAC,IAAE,EAACgC,IAAI,CAAC4G,KAAK,CAAC/J,MAAM,CAACoB,CAAC,CAAC,EAAC,GACjD;IAAA;MAAAoF,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CACN,eAIDpI,OAAA;MACEyL,GAAG,EAAE1J,IAAK;MACV9B,KAAK,EAAE6K,iBAAiB,CAAC,CAAE;MAC3BY,WAAW,EAAEnI,eAAgB;MAAAuE,QAAA,GAE5BR,uBAAuB,CAAC,CAAC,EAEzB7F,MAAM,CAACkK,UAAU,iBAChB3L,OAAA;QACEC,KAAK,EAAE;UACLuH,QAAQ,EAAE,UAAU;UACpBtG,GAAG,EAAE,KAAK;UACVC,IAAI,EAAE,KAAK;UACXC,SAAS,EAAE,uBAAuB;UAClC4I,QAAQ,EAAEpF,IAAI,CAACgG,GAAG,CAACvH,KAAK,GAAG,CAAC,EAAE,EAAE,CAAC;UACjC4G,KAAK,EAAE,SAAS;UAChBU,UAAU,EAAE,MAAM;UAClB9C,MAAM,EAAE,IAAI;UACZ+D,UAAU,EAAE,6BAA6B;UACzC7C,OAAO,EAAE,GAAG;UACZE,aAAa,EAAE;QACjB,CAAE;QAAAnB,QAAA,EACH;MAED;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CACN,eAEDpI,OAAA;QACEC,KAAK,EAAE;UACL+J,QAAQ,EAAEpF,IAAI,CAACqC,GAAG,CAAC,EAAE,EAAErC,IAAI,CAACgG,GAAG,CAACvH,KAAK,GAAG,IAAI,EAAE,EAAE,CAAC,CAAC;UAClDwI,YAAY,EAAE,CAAC;UACf7C,UAAU,EAAE;QACd,CAAE;QAAAlB,QAAA,EAEDrG,MAAM,CAACqK,IAAI,IAAI;MAAI;QAAA7D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjB,CAAC,eACNpI,OAAA;QACEC,KAAK,EAAE;UACL0K,UAAU,EAAE,MAAM;UAClBV,KAAK,EAAE,SAAS;UAChBD,QAAQ,EAAEpF,IAAI,CAACqC,GAAG,CAAC,EAAE,EAAE5D,KAAK,GAAG,GAAG,CAAC;UACnCwI,YAAY,EAAE;QAChB,CAAE;QAAA/D,QAAA,EAEDrG,MAAM,CAACa;MAAI;QAAA2F,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACT,CAAC,eACNpI,OAAA;QACEC,KAAK,EAAE;UACL+J,QAAQ,EAAEpF,IAAI,CAACqC,GAAG,CAAC,CAAC,EAAE5D,KAAK,GAAG,CAAC,CAAC;UAChC4G,KAAK,EAAE,SAAS;UAChBU,UAAU,EAAE,GAAG;UACfoB,aAAa,EAAE;QACjB,CAAE;QAAAjE,QAAA,EAEDrG,MAAM,CAACuK;MAAI;QAAA/D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACT,CAAC,EAELC,gBAAgB,CAAC,CAAC,EAClBuB,kBAAkB,CAAC,CAAC,EACpBU,gBAAgB,CAAC,CAAC;IAAA;MAAArC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChB,CAAC,EAGL9C,QAAQ,iBACPtF,OAAA;MACEC,KAAK,EAAE;QACLuH,QAAQ,EAAE,OAAO;QACjBtG,GAAG,EAAE,CAAC;QACNC,IAAI,EAAE,CAAC;QACPE,KAAK,EAAE,CAAC;QACRC,MAAM,EAAE,CAAC;QACTuG,MAAM,EAAE;MACV,CAAE;MACFS,OAAO,EAAEA,CAAA,KAAM/C,WAAW,CAAC,KAAK;IAAE;MAAA0C,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnC,CACF;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAACzG,EAAA,CA1lBIH,YAAY;EAAA,QAGe1B,OAAO;AAAA;AAAAmM,EAAA,GAHlCzK,YAAY;AA4lBlB,eAAeA,YAAY;AAAC,IAAAyK,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}